{"id":"wt-07c","title":"Per-project config: Worker behavior and prompts","description":"Add worker configuration to customize how Claude workers behave.\n\n## Config Structure\n```yaml\n# .wt/config.yaml\n\nworker:\n  # Claude command customization\n  command: claude --dangerously-skip-permissions\n  \n  # Timeout per bead (auto mode)\n  timeout: 30m\n  \n  # Max retries on failure\n  max_retries: 2\n  \n  # Context/prompt customization\n  prompt:\n    # Prepend to every worker prompt\n    prefix: |\n      You are working on the ${WT_PROJECT} project.\n      Follow the patterns in CLAUDE.md.\n      \n    # Append to every worker prompt  \n    suffix: |\n      Remember to run tests before committing.\n      Use conventional commit messages.\n    \n    # Include these files in context\n    include_files:\n      - CLAUDE.md\n      - docs/ARCHITECTURE.md\n      - .cursor/rules\n  \n  # Restrict worker capabilities\n  capabilities:\n    can_create_files: true\n    can_delete_files: true\n    can_run_commands: true\n    can_access_network: false  # For paranoid mode\n  \n  # Auto-recovery behavior\n  recovery:\n    on_stuck: restart  # restart | notify | abandon\n    stuck_threshold: 10m  # No activity for this long = stuck\n    on_context_limit: handoff  # handoff | restart | notify\n```\n\n## Implementation\n1. worker.command used instead of global editor_cmd\n2. Prompt prefix/suffix injected into buildInitialPrompt()\n3. include_files read and appended to prompt context\n4. Recovery options integrate with wt watch monitoring","status":"open","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T15:24:29.516343+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T15:24:29.516343+05:30","labels":["auto"]}
{"id":"wt-19b","title":"Auto-detect and setup .mcp.json for projects with secrets","description":"Improve UX for onboarding projects that have sensitive .mcp.json files (API keys, etc.).\n\nDuring `wt project add`:\n- Detect if .mcp.json exists and is gitignored\n- Prompt: 'Found .mcp.json (gitignored). Set up auto-copy to worktrees? [Y/n]'\n- If yes: copy to ~/.config/wt/mcp/\u003cproject\u003e/.mcp.json and add on_create hook\n\nAlso add dedicated command for existing projects:\n`wt project setup-mcp \u003cname\u003e`\n- Copies current .mcp.json to safe config location\n- Configures on_create hook automatically\n- Idempotent - safe to run multiple times\n\nStorage location: ~/.config/wt/mcp/\u003cproject\u003e/.mcp.json\nHook: cp ~/.config/wt/mcp/\u003cproject\u003e/.mcp.json .mcp.json","status":"open","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-22T06:48:01.273408+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-22T06:48:01.273408+05:30","labels":["auto"]}
{"id":"wt-1a3","title":"wt with no args should print help and exit","description":"Currently invoking just 'wt' without any arguments should print help text and exit, similar to other CLI tools.","status":"closed","priority":2,"issue_type":"chore","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T07:25:04.664057+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T12:28:56.744312+05:30","closed_at":"2026-01-25T12:28:56.744312+05:30","close_reason":"Closed"}
{"id":"wt-1mb","title":"Test project lookup","status":"closed","priority":4,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T09:53:59.622572+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T09:55:23.339977+05:30","closed_at":"2026-01-19T09:55:23.339977+05:30","close_reason":"Test bead, no longer needed"}
{"id":"wt-1po","title":"Ralph mode: fresh context with bead-as-spec pattern","description":"Adopt the Ralph Wiggum loop pattern for wt workers.\n\n## What is Ralph Mode?\n\nFrom agentic coding research: instead of letting context accumulate (leading to \"dumb zone\" / context rot), each task gets fresh context with a well-defined spec as source of truth.\n\n**Key adaptation for wt:**\n- Fresh Claude session per bead (not one long session)\n- Bead description IS the spec (no separate spec.md needed)\n- Audit bead quality before ralph mode\n\n## Usage\n\n### In wt auto\n```bash\nwt auto --epic gw-backend-z04u --ralph\n\n# For each bead in epic:\n# 1. Audit bead description quality\n# 2. If too sparse → pause, nudge user for more details\n# 3. Fresh Claude session with bead as full context\n# 4. Complete bead\n# 5. Next bead (fresh context again)\n```\n\n### In wt new\n```bash\nwt new gw-backend-3ulq --ralph\n\n# 1. Audit bead description\n# 2. If sparse: \"Bead needs more detail for ralph mode\"\n#    - Show what's missing (acceptance criteria? examples?)\n#    - Offer to add details interactively\n# 3. Spawn with fresh context, bead as spec\n```\n\n## Bead Audit for Ralph Mode\n\nBefore ralph execution, check bead has:\n- [ ] Clear title (what, not how)\n- [ ] Description with context\n- [ ] Acceptance criteria or definition of done\n- [ ] Dependencies resolved (not blocked)\n\nIf missing, prompt:\n```\n⚠️ Bead gw-backend-3ulq needs more detail for ralph mode:\n  Missing: acceptance criteria\n\n  Options:\n  1. Add details now (opens $EDITOR)\n  2. Proceed anyway (risky)\n  3. Cancel\n```\n\n## Implementation\n\n1. Add `--ralph` flag to `wt auto` and `wt new`\n2. Create bead auditor (check description quality)\n3. Nudge flow for sparse beads\n4. Ensure fresh session per bead (may already exist via wt-rw7)\n\n## Why This Matters\n\n- Prevents context rot in long-running auto batches\n- Forces better bead grooming (spec quality)\n- Each bead gets Claude's full attention with fresh context\n- Aligns with \"bidirectional planning\" - spec must be good before execution\n\n## Related\n- wt-rw7: Fresh session per bead (merged) - partial implementation\n- Ralph Wiggum pattern: https://reddit.com/r/ClaudeAI/comments/1qlqaub/\n\n## Not Included\n- Headless mode (not required, just the pattern)\n- Separate spec.md files (bead is the spec)\n- Loop within single bead (fresh per bead, not per iteration)","status":"open","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-26T10:07:15.163674+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-26T10:07:15.163674+05:30","labels":["auto"]}
{"id":"wt-1qy","title":"Docs: Focus on hub workflows, add sample scenarios","description":"Improve docs to focus more on user workflows than CLI commands:\n\n1. **Hub-centric documentation**: Users don't directly use CLI, they use the hub.\n   Docs should focus on hub/conversations rather than individual commands.\n\n2. **Sample workflows**: Add practical workflow examples:\n   - Safe changes (PR review mode)\n   - YOLO mode (direct merge)\n   - Grooming sessions\n   - Parallel workers\n   - Session handoff\n\n3. **Move SPEC to docs**: SPEC.md could be a doc page (reference/spec.md)\n   to keep technical details with user docs.","status":"closed","priority":2,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-20T20:15:07.476669+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T22:18:55.636947+05:30","closed_at":"2026-01-21T22:18:55.636947+05:30","close_reason":"Closed"}
{"id":"wt-1tq","title":"Add project migration command to populate new schema fields","description":"Existing projects need migration to populate new schema fields added in wt-98c:\n\n**Fields to populate:**\n- `repo`: Get canonical git remote URL (not just path)\n- `branch`: Set explicitly (default: main)\n- `beads_prefix`: Validate against .beads/ directory\n\n**Implementation:**\n- Add `wt project migrate` command\n- For each project:\n  1. Get git remote URL: `git -C \u003cpath\u003e remote get-url origin`\n  2. Get default branch: `git -C \u003cpath\u003e symbolic-ref refs/remotes/origin/HEAD`\n  3. Read beads prefix from `\u003cpath\u003e/.beads/`\n  4. Update project config\n- Show diff of changes before applying\n- Support `--dry-run` flag\n\n**Also consider:**\n- Auto-upgrade on project access (lazy migration)\n- Validation warnings if fields are missing","status":"closed","priority":2,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-23T23:49:31.236609+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-24T13:33:20.290628+05:30","closed_at":"2026-01-24T13:33:20.290628+05:30","close_reason":"Closed"}
{"id":"wt-1zk","title":"TUI session picker with keyboard navigation","description":"Replace fzf-based C-b s session picker with a proper TUI that has keyboard navigation similar to wt watch. More consistent UX across wt tooling.","status":"open","priority":3,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-20T19:36:25.704946+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-20T19:36:25.704946+05:30"}
{"id":"wt-21l","title":"wt auto: Detect completed work and skip beads","description":"When a worker completes multiple beads in one commit, wt auto should detect this and skip already-done beads.\n\n## Observed\nWorker completed all 3 doc tasks in one commit:\n```\nCloses: wt-1a3, wt-hvx, wt-tcf (Documentation P2 batch)\n```\n\nBut wt auto still tried to process beads 2 and 3 (which failed for other reasons).\n\n## Desired Behavior\n- After each bead completes, check if subsequent beads were also closed\n- Parse commit messages for 'Closes: wt-xxx' patterns\n- Skip beads that are already closed\n- Log: 'Bead wt-1a3 already closed by previous commit, skipping'\n\n## Benefits\n- Faster epic completion when worker batches work\n- No wasted attempts on already-done work\n- Cleaner logs\n\n## Note\nThis is a nice-to-have optimization, not critical. Lower priority than the bug fixes.","status":"closed","priority":3,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T12:30:50.701491+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-29T18:25:01.53221+05:30","closed_at":"2026-01-29T18:25:01.53221+05:30","close_reason":"Added skip-closed-beads check with fresh status re-check before each bead in epic processing loop"}
{"id":"wt-260","title":"Per-project config: Safety levels and guardrails","description":"Add safety configuration to control how cautious wt behaves.\n\n## Config Structure\n```yaml\n# .wt/config.yaml\n\nsafety:\n  level: balanced  # yolo | balanced | paranoid\n  \n  # Or specify granularly:\n  tests:\n    when: pre-merge  # never | pre-merge | pre-commit | always\n    command: go test ./...\n    fail_action: block  # block | warn | ignore\n  \n  lint:\n    when: pre-commit\n    command: golangci-lint run\n    fail_action: warn\n  \n  # Require human approval at certain points\n  gates:\n    - before_merge     # Human must approve PR\n    - before_deploy    # If deploy hook exists\n  \n  # Restrict what workers can do\n  restrictions:\n    allow_force_push: false\n    allow_delete_branch: false\n    allow_modify_ci: false\n    protected_paths:\n      - .github/workflows/\n      - Makefile\n      - go.mod\n```\n\n## Safety Level Presets\n\n### yolo\n- tests.when: never\n- gates: []\n- restrictions: none\n\n### balanced\n- tests.when: pre-merge\n- tests.fail_action: warn\n- gates: [before_merge]\n- restrictions.allow_force_push: false\n\n### paranoid\n- tests.when: always\n- tests.fail_action: block\n- lint.when: pre-commit\n- gates: [before_merge]\n- All restrictions enabled\n\n## Implementation\n1. Safety checks run at appropriate lifecycle points\n2. `wt done` respects gates (blocks if gate requires approval)\n3. Workers inherit restrictions (can't bypass via raw git)","status":"open","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T15:24:27.65964+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T15:24:27.65964+05:30"}
{"id":"wt-273","title":"wt new: Warn or block when spawning worker on epic","description":"Currently `wt new \u003cepic-id\u003e` spawns a worker for an epic bead without any warning. This is confusing because:\n\n1. Epics are organizational containers, not implementation tasks\n2. Claude gets the epic description and doesn't know what to actually implement\n3. User probably meant to run `wt auto --epic` or spawn individual children\n\n## Current Behavior\n```bash\nwt new gw-frontend-uux  # epic with 4 children\n# Creates worktree, spawns Claude who is confused about what to do\n```\n\n## Proposed Behavior\n\n### Option A: Interactive prompt\n```bash\nwt new gw-frontend-uux\n# \"gw-frontend-uux is an epic with 4 children. What would you like to do?\n#  1. Run wt auto --epic (process all children sequentially)\n#  2. Spawn worker for first ready child (gw-frontend-c0v)\n#  3. Proceed anyway (work on epic itself)\n#  4. Cancel\"\n```\n\n### Option B: Block with suggestion\n```bash\nwt new gw-frontend-uux\n# Error: Cannot spawn worker for epic. Use one of:\n#   wt auto --epic gw-frontend-uux    # process all children\n#   wt new gw-frontend-c0v            # spawn specific child\n#   wt new gw-frontend-uux --force    # override (advanced)\n```\n\n### Option C: Warning only\n```bash\nwt new gw-frontend-uux\n# Warning: gw-frontend-uux is an epic with 4 children.\n# Consider: wt auto --epic gw-frontend-uux\n# Proceeding in 5s... (Ctrl+C to cancel)\n```\n\n## Implementation\n1. In `cmdNew`, after fetching `beadInfo`, check `beadInfo.IssueType == \"epic\"`\n2. If epic, check for children via `bd show --json` \n3. Present appropriate prompt/warning/error\n4. Add `--force` flag to bypass for advanced users\n\n## Recommendation\nOption B (block with suggestion) is clearest. Users rarely want to work on epics directly.","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-26T09:46:58.119966+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-30T18:36:52.35893+05:30","closed_at":"2026-01-30T18:36:52.35893+05:30","close_reason":"Block wt new on epics with helpful suggestions; --force to override","labels":["auto"]}
{"id":"wt-2ls","title":"Phase 3: Test environment","description":"Implement optional per-worktree test environments with configurable hooks.\n\n## Key Principle\nTest environment is completely optional. wt works without any test_env config.\n\n## Skill-Assisted Setup\nThe wt skill can:\n- Ask user if they need a test environment for the worktree\n- Detect project type (Node, Go, Python, etc.) and suggest appropriate setup\n- Help generate setup/teardown scripts based on project needs\n\n## Core Responsibilities (wt handles, when enabled)\n- Port offset allocation and tracking\n- Export PORT_OFFSET environment variable\n- Call user-defined hooks if configured\n\n## Configuration (.wt.toml)\n```toml\n[test_env]\nenabled = true  # default: false\nport_offset_base = 1000\nport_offset_step = 100\n\n# User-defined hooks (optional)\nsetup_cmd = \"./scripts/test-setup.sh\"\nteardown_cmd = \"./scripts/test-teardown.sh\"\nhealth_check_cmd = \"./scripts/health-check.sh\"\n```\n\n## Behavior (when test_env.enabled = true)\n- On `wt new`: allocate port offset, set PORT_OFFSET, call setup_cmd if defined\n- On `wt close/kill`: call teardown_cmd if defined, release port offset\n- Health check: call health_check_cmd if defined, with configurable timeout/retries\n\n## Design Principles\n- Keep wt's role minimal - provide offset and call hooks\n- Don't impose test env overhead on projects that don't need it\n- Let skill handle interactive setup and smart suggestions","status":"closed","priority":1,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T09:32:09.36879+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T10:10:48.878989+05:30","closed_at":"2026-01-19T10:10:48.878989+05:30","close_reason":"Implemented optional test environment with port offset allocation, setup/teardown hooks, and health checks","dependencies":[{"issue_id":"wt-2ls","depends_on_id":"wt-5a7","type":"blocks","created_at":"2026-01-19T09:32:21.045605+05:30","created_by":"Lakshmi Narasimhan"}]}
{"id":"wt-31h","title":"Per-project config: Hooks and lifecycle events","description":"Add comprehensive hooks configuration to .wt/config.yaml.\n\n## Config Structure\n```yaml\n# .wt/config.yaml\n\nhooks:\n  # Worker lifecycle\n  on_spawn:\n    - ./scripts/setup-env.sh\n    - echo \"Worker ${WT_SESSION} starting on ${WT_BEAD}\"\n  \n  on_complete:\n    - ./scripts/notify-slack.sh \"Worker done: ${WT_BEAD}\"\n  \n  on_fail:\n    - ./scripts/alert-oncall.sh \"${WT_SESSION} failed\"\n  \n  # Git lifecycle  \n  pre_commit:\n    - go fmt ./...\n    - go vet ./...\n  \n  post_commit:\n    - echo \"Committed ${GIT_COMMIT_SHA}\"\n  \n  pre_merge:\n    - ./scripts/run-integration-tests.sh\n  \n  post_merge:\n    - ./scripts/deploy-staging.sh\n  \n  # Bead lifecycle\n  on_bead_start:\n    - bd update ${WT_BEAD} --status in_progress\n  \n  on_bead_complete:\n    - ./scripts/update-changelog.sh ${WT_BEAD}\n\n  # Auto mode lifecycle\n  on_epic_start:\n    - echo \"Starting epic ${WT_EPIC}\"\n  \n  on_epic_complete:\n    - ./scripts/celebrate.sh\n```\n\n## Available Variables\n- ${WT_SESSION} - Session name (e.g., wt-po)\n- ${WT_BEAD} - Bead ID\n- ${WT_EPIC} - Epic ID (in auto mode)\n- ${WT_WORKTREE} - Worktree path\n- ${WT_PROJECT} - Project name\n- ${PORT_OFFSET} - Allocated port offset\n- ${GIT_COMMIT_SHA} - After commit\n\n## Behavior\n- Hooks run synchronously by default\n- Non-zero exit blocks the action (unless fail_action: ignore)\n- Hooks inherit worker's environment\n- Timeout configurable per hook (default: 5m)","status":"open","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T15:24:28.471533+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T15:24:28.471533+05:30","labels":["auto"]}
{"id":"wt-3ox","title":"Per-project YAML config: Core structure and modes","description":"Add per-project .wt/config.yaml support with mode presets and custom overrides.\n\n## Location\n```\nproject/\n├── .wt/\n│   └── config.yaml    # Project-specific wt config\n├── .beads/\n└── ...\n```\n\n## Core Structure\n```yaml\n# .wt/config.yaml\n\n# Preset mode (optional) - sets sensible defaults\nmode: strict  # yolo | balanced | strict | custom\n\n# Override any preset defaults below\nmax_workers: 3\nmerge_mode: pr-review  # direct | pr-auto | pr-review\nauto_rebase: true\n\n# Branch configuration\ndefault_branch: main\nfeature_branch_prefix: feat/\n```\n\n## Mode Presets\n\n### yolo\n- max_workers: 5\n- merge_mode: direct\n- tests: skip\n- auto_close_bead: true\n- review_required: false\n\n### balanced (default)\n- max_workers: 3\n- merge_mode: pr-auto\n- tests: optional\n- auto_close_bead: true\n- review_required: false\n\n### strict\n- max_workers: 2\n- merge_mode: pr-review\n- tests: required\n- auto_close_bead: false\n- review_required: true\n\n### custom\n- No defaults, everything must be specified\n\n## Implementation\n1. Check for .wt/config.yaml on project registration\n2. Merge with global ~/.config/wt/config.json\n3. Project config overrides global\n4. Mode preset provides defaults, explicit values override preset","status":"open","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T15:24:25.04943+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T15:24:25.04943+05:30","labels":["auto"]}
{"id":"wt-3tf","title":"Test session for wt","status":"closed","priority":4,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T09:41:00.574802+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T09:41:46.879945+05:30","closed_at":"2026-01-19T09:41:46.879945+05:30","close_reason":"Closed"}
{"id":"wt-4ln","title":"Reframe wt docs for conversational usage, not CLI reference","description":"Current docs focus on CLI commands and flags as if humans type them directly. Instead:\n\n- Present wt as a conversational tool Claude uses on behalf of users\n- Lead with natural language examples: 'What workers are running?' → Claude runs wt\n- Move CLI reference to appendix/reference section\n- Show the human-Claude conversation flow, not command syntax\n- CLI options should be secondary (for power users/debugging)\n\nExamples of current vs desired:\n- Current: 'wt list --json' with flag descriptions\n- Desired: 'Ask Claude: show me active sessions' → Claude uses wt list\n\nAffects: docs/getting-started/, docs/guides/, wt skill","status":"closed","priority":2,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-21T06:31:19.78536+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T22:24:23.852924+05:30","closed_at":"2026-01-21T22:24:23.852924+05:30","close_reason":"Closed"}
{"id":"wt-4yq","title":"Design: Map messaging use cases to wt workflow","description":"Document specific messaging use cases and map them to the native Go messaging design (wt-h1z).\n\n## Use Cases to Map\n1. Sequential auto: orchestrator assigns beads, waits for DONE/STUCK\n2. Parallel auto: multiple workers, file reservations, conflict avoidance\n3. Hub-worker dialogue: hub asks worker questions mid-task\n4. Worker-worker coordination: shared resources, handoff\n5. Audit trail: all messages logged for post-mortem analysis\n6. Crash recovery: orchestrator restarts, reconciles inbox\n\n## Deliverables\n- Message type catalog (subjects, bodies, ack requirements)\n- Threading model (conversations vs one-shot messages)\n- Integration design: how processEpic/resumeRun uses messaging\n- Migration path from current tmux polling to message-based orchestration\n\n## Dependencies\n- wt-h1z findings (native Go messaging prototype)\n- wt-wy7 findings (MCP Agent Mail protocol reference)","status":"closed","priority":1,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-27T08:10:26.813842+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-30T15:53:47.702862+05:30","closed_at":"2026-01-30T15:53:47.702862+05:30","close_reason":"Design doc complete: message catalog, threading, 3-phase migration, crash recovery","dependencies":[{"issue_id":"wt-4yq","depends_on_id":"wt-h1z","type":"blocks","created_at":"2026-01-30T14:44:21.412812+05:30","created_by":"Lakshmi Narasimhan"}]}
{"id":"wt-5a7","title":"Phase 2: Project management","description":"Implement project registration and config:\n- wt projects: List registered projects\n- wt project add \u003cname\u003e \u003cpath\u003e: Register project\n- wt project config \u003cname\u003e: Edit config\n- Per-project merge_mode\n- Per-project test_env config\n- Project config file structure","status":"closed","priority":1,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T09:32:08.577058+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T09:55:55.573378+05:30","closed_at":"2026-01-19T09:55:55.573378+05:30","close_reason":"Phase 2 project management implemented","dependencies":[{"issue_id":"wt-5a7","depends_on_id":"wt-bqf","type":"blocks","created_at":"2026-01-19T09:32:20.95944+05:30","created_by":"Lakshmi Narasimhan"}]}
{"id":"wt-5fs","title":"wt auto: -p/--project flag not forwarded to worktree creation","description":"When multiple projects share a bead prefix (e.g., gw-backend and gw-backend-import), wt auto --epic \u003cid\u003e -p \u003cproject\u003e fails with 'multiple projects share bead prefix' error. The -p flag is accepted by the CLI and works for dry-run, but is not forwarded to the internal worktree creation step. Workaround: temporarily remove the conflicting project registration. Reproduce: register same repo under two names with different branches, then run wt auto --epic \u003cid\u003e -p \u003cproject-name\u003e.","status":"closed","priority":1,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-29T18:45:16.939717+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-29T18:49:23.416312+05:30","closed_at":"2026-01-29T18:49:23.416312+05:30","close_reason":"Fixed - project flag now forwarded to worktree creation"}
{"id":"wt-5i3","title":"Add merge conflict detection to wt","description":"Automatically rebase on main before PR creation, with Claude resolving conflicts.\n\n## Philosophy\nwt workers are Claude agents with full code context. They can intelligently resolve\nmost merge conflicts - not just pick ours/theirs, but understand both sides and merge\ncorrectly. Only escalate to humans when genuinely uncertain.\n\n## Workflow\n\n### Default flow (wt done)\n```\nwt done\n  → Fetch latest main\n  → Rebase session branch on main\n  → If conflicts:\n      → Claude analyzes both sides\n      → Claude resolves conflict\n      → Run tests to verify\n  → Tests pass → Create PR\n  → Tests fail or uncertain → Signal blocked/error\n```\n\n### Escalation\nWhen Claude can't confidently resolve:\n```bash\nwt signal blocked \"Merge conflict in auth.go - competing changes to login flow, need human decision\"\n```\n\n## Escalation Criteria\n\nClaude should AUTO-RESOLVE when:\n- Trivial conflicts (whitespace, imports, non-overlapping changes)\n- Additive changes (both sides added different things)\n- Clear supersession (main fixed a bug worker also fixed)\n- Tests pass after resolution\n\nClaude should ESCALATE when:\n\n### 1. Semantic conflicts - Same code, incompatible intent\n```\nMain: changed login() to use JWT\nWorker: changed login() to use sessions\n→ Can't pick both, need human decision on auth strategy\n```\n\n### 2. Deletion conflicts - One side deleted what the other modified\n```\nMain: deleted validateUser()\nWorker: added error handling to validateUser()\n→ Was deletion intentional? Need context.\n```\n\n### 3. Test failures after resolution\n```\n→ Claude resolved, but tests fail\n→ Resolution was wrong, human needs to review\n```\n\n### 4. Large surface area - Too many conflicting files\n```\n→ 10+ files with conflicts\n→ High risk of missing something, human should review\n```\n\n### 5. External dependencies changed - API/schema changes in main\n```\nMain: changed User struct fields\nWorker: added code using old User fields\n→ Need to understand new schema before adapting\n```\n\n### 6. Ambiguous business logic\n```\nMain: calculatePrice() now applies 10% discount\nWorker: calculatePrice() now applies bulk pricing\n→ Which pricing rule wins? Business decision.\n```\n\n### Escalation message format\nMessages should be specific and actionable:\n```bash\n# Bad\nwt signal blocked \"Merge conflict\"\n\n# Good  \nwt signal blocked \"Conflict in auth.go: main switched to JWT, I added session refresh. Which auth strategy?\"\n```\n\n## Implementation\n\n### 1. Update buildInitialPrompt (session_commands.go)\nAdd conflict awareness to worker's initial instructions:\n```\nWorkflow:\n1. Implement the task\n2. Commit your changes\n3. Run tests\n4. Run `wt done` (will auto-rebase on main)\n5. If conflicts: resolve trivial ones, escalate complex ones via `wt signal blocked`\n```\n\nBrief in initial prompt, detailed rules injected only when conflicts occur.\n\n### 2. Auto-rebase in wt done\n- Fetch origin/main before creating PR\n- Attempt rebase\n- On conflict: parse conflict markers, attempt resolution\n- Commit resolved files\n- Run tests if configured\n\n### 3. Conflict-time injection\nWhen conflicts detected, inject detailed context to worker:\n```\nMerge conflict in src/auth.go:\n\u003c\u003c\u003c\u003c\u003c\u003c\u003c HEAD (your changes)\n[code from worker branch]\n=======\n[code from main]\n\u003e\u003e\u003e\u003e\u003e\u003e\u003e main\n\nYour original intent: [from bead description]\n\nResolution rules:\n- Auto-resolve: trivial, additive, clear supersession\n- Escalate: semantic conflicts, deletions, business logic, large surface area\n- Run tests after resolving\n- Signal blocked if uncertain with specific reason\n```\n\n### 4. Project config\n```json\n{\n  \"auto_rebase\": true,       // default: rebase + resolve\n  \"auto_rebase\": \"prompt\",   // ask before rebasing\n  \"auto_rebase\": false       // skip rebase, PR may have conflicts\n}\n```\n\n### 5. Status indicators\n- `wt list`: Show \"↓3\" for branches behind main\n- `wt watch`: Highlight sessions needing rebase\n- Add `--json` support for conflict info\n\n## Commands\n```bash\nwt done              # Auto-rebase, resolve, PR (default)\nwt done --no-rebase  # Skip rebase, create PR as-is\nwt rebase            # Manual rebase from within worker\nwt rebase \u003csession\u003e  # Rebase a worker from hub\n```\n\n## Success Criteria\n- Workers automatically stay up-to-date with main\n- Most conflicts resolved without human intervention\n- Clear escalation path for ambiguous conflicts\n- Tests validate conflict resolution before PR\n- Escalation messages are specific and actionable","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-20T18:33:32.941455+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T12:38:47.074911+05:30","closed_at":"2026-01-21T12:38:47.074911+05:30","close_reason":"Closed"}
{"id":"wt-5xf","title":"wt auto: Per-project locks for parallel epic processing","description":"Currently `wt auto` uses a global lock (`~/.config/wt/auto.lock`), preventing parallel auto runs even across different projects.\n\n## Problem\nWhen working on cross-project features (e.g., gw-backend + gw-frontend), you can't run:\n```bash\nwt auto --epic gw-backend-z04u \u0026\nwt auto --epic gw-frontend-uux \u0026\n```\n\nThe second command fails due to global lock.\n\n## Proposed Solution\nPer-project locks instead of global lock:\n- Lock file: `~/.config/wt/auto-\u003cproject\u003e.lock`\n- One auto run per project at a time\n- Multiple projects can run auto in parallel\n\n## Implementation\n\n### Lock file naming\n```\n~/.config/wt/auto-gw-backend.lock\n~/.config/wt/auto-gw-frontend.lock\n~/.config/wt/auto-wt.lock\n```\n\n### Lock content (for debugging)\n```json\n{\n  \"project\": \"gw-backend\",\n  \"epic\": \"gw-backend-z04u\",\n  \"started_at\": \"2026-01-26T10:00:00Z\",\n  \"pid\": 12345\n}\n```\n\n### CLI behavior\n- `wt auto --epic X` acquires project-specific lock\n- `wt auto --stop` stops all running autos (or `--stop --project X` for specific)\n- `wt auto --status` shows all running autos across projects\n\n### Safety\n- Same project can't have two autos (project lock)\n- Epic must belong to the locked project\n- `--force` overrides project lock (with warning)\n\n## Use Case\nCross-project feature development:\n```bash\n# From hub, run both epics in parallel\nwt auto --epic gw-backend-z04u \u0026\nwt auto --epic gw-frontend-uux \u0026\n\n# Monitor both\nwt watch\n\n# Stop specific project if needed\nwt auto --stop --project gw-frontend\n```\n\n## Migration\n- Deprecate global lock\n- Or keep global lock as fallback with `--global-lock` flag","status":"closed","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-26T09:36:33.415203+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-30T15:39:23.809245+05:30","closed_at":"2026-01-30T15:39:23.809245+05:30","close_reason":"Implemented per-project locks for parallel epic processing"}
{"id":"wt-63a","title":"Elaborate handoff: Include full bead context, not just IDs","description":"## Problem\n\nCurrent handoff shows bead IDs only (`wt-7vr`, `wt-a9y`). Next session Claude lacks context to resume effectively.\n\n## Solution\n\nHandoff should include:\n\n```markdown\n## Completed This Session\n- **wt-7vr**: Enter key press after prompt paste\n  - Files changed: src/session.py, src/input.py\n  - PR: #42 (merged)\n  \n## Ready Work (top 5 by priority)\n- **wt-3ox** [P1]: Per-project YAML config\n  - Deps: none\n  - Context: discussed in session, see spec in conversation\n\n## Blocked\n- **wt-xyz**: Needs external API key from user\n```\n\n## Acceptance Criteria\n- Completed beads show title, files, PR status\n- Ready work shows priority, deps, relevant context\n- Blocked beads explain why\n- Handoff is resumable context, not just changelog","status":"tombstone","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T16:15:20.776197+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T16:16:17.473007+05:30","deleted_at":"2026-01-25T16:16:17.473007+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"wt-661","title":"Phase 4: Merge workflow","description":"Implement merge modes:\n- wt done command\n- direct mode: merge to main, push\n- pr-auto mode: create PR, enable auto-merge\n- pr-review mode: create PR, wait for review\n- wt status in worker session\n- wt abandon command","status":"closed","priority":1,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T09:32:10.389818+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T11:13:14.801474+05:30","closed_at":"2026-01-19T11:13:14.801474+05:30","close_reason":"Closed","dependencies":[{"issue_id":"wt-661","depends_on_id":"wt-2ls","type":"blocks","created_at":"2026-01-19T09:32:21.140846+05:30","created_by":"Lakshmi Narasimhan"}]}
{"id":"wt-6b3","title":"Add missing integration tests for CLI commands","description":"## Missing Integration Tests\n\n### CLI Commands (high priority)\n- [ ] `wt done` - Test all merge modes (direct, pr-auto, pr-review)\n- [ ] `wt auto` - Autonomous batch processing workflow\n- [ ] `wt switch` - Session switching between active sessions\n- [ ] `wt status` - Session status display\n\n### CLI Commands (medium priority)\n- [ ] `wt watch` - Live dashboard (may need mock or timeout)\n- [ ] `wt pick` - Interactive picker (fzf fallback)\n- [ ] `wt doctor` - Diagnostics checks\n\n### Hook Execution\n- [ ] on_create hook execution during `wt new`\n- [ ] on_close hook execution during `wt close`\n\n### Error Paths\n- [ ] Invalid/missing config files\n- [ ] Corrupted state files\n- [ ] Merge failures (conflicts, PR creation errors)\n- [ ] Worktree already exists\n- [ ] Session already exists for bead\n- [ ] Project with active sessions (removal prevention)\n\n### Edge Cases\n- [ ] Multiple projects with cross-project session management\n- [ ] Bead close operations with actual bead closure\n- [ ] Test environment setup/teardown with health checks","status":"closed","priority":2,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T17:18:02.855235+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T17:29:03.324573+05:30","closed_at":"2026-01-19T17:29:03.324573+05:30","close_reason":"Added integration tests for: status, switch, doctor, pick, done (direct merge), auto mode components, hooks, cross-project sessions, test environment setup/teardown, and error paths. All tests pass."}
{"id":"wt-6dc","title":"Improve error handling and edge cases","status":"closed","priority":3,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T13:50:56.109807+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T17:32:51.957636+05:30","closed_at":"2026-01-19T17:32:51.957636+05:30","close_reason":"Closed"}
{"id":"wt-6j8","title":"wt auto --help starts processing instead of showing help","description":"Running wt auto --help should show help text, but instead it starts processing beads. The help flag isn't being handled correctly.","status":"closed","priority":1,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-21T20:57:54.052993+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T21:59:35.024268+05:30","closed_at":"2026-01-21T21:59:35.024268+05:30","close_reason":"Closed"}
{"id":"wt-6mv","title":"Add wt seance --spawn to resurrect past sessions","description":"Create new tmux session and resume Claude conversation from a past session. Workflow: find past session via seance, spawn new worker with that Claude context.","status":"closed","priority":3,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T13:38:29.662672+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T17:40:23.487904+05:30","closed_at":"2026-01-21T17:40:23.487904+05:30","close_reason":"Already implemented - wt seance \u003cname\u003e --spawn works"}
{"id":"wt-6uk","title":"Add tmux keybindings (wt pick, wt keys)","status":"closed","priority":2,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T13:51:22.049002+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T13:51:27.612268+05:30","closed_at":"2026-01-19T13:51:27.612268+05:30","close_reason":"Implemented wt pick and wt keys commands"}
{"id":"wt-74z","title":"wt auto/new: PRs created against main instead of project default_branch","description":"## Problem\nPRs are being created against `main` instead of the configured `default_branch` in project config.\n\nEvidence:\n- gw-backend PR #3: created against main instead of features/ai-notes-schedule\n- gw-frontend PR #7: same issue\n\nProject config shows:\n```json\n{\n  \"default_branch\": \"features/ai-notes-schedule\",\n  \"merge_mode\": \"pr-review\"\n}\n```\n\n## Expected\nPRs should target the `default_branch` from project config, not hardcoded `main`.\n\n## Impact\nP0 - This causes PRs to target wrong branch, breaking feature branch workflows.","status":"closed","priority":0,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-26T12:06:45.554591+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-27T11:13:12.866827+05:30","closed_at":"2026-01-27T11:13:12.866827+05:30","close_reason":"Fixed: worker prompt now includes --base \u003cdefaultBranch\u003e in gh pr create instructions"}
{"id":"wt-7fk","title":"Testing infrastructure","description":"Set up testing infrastructure:\n- Unit test framework (go test)\n- Integration test harness\n- Mock tmux sessions for unit tests\n- Temporary worktree directories\n- Test fixtures for beads\n- CI pipeline (GitHub Actions)\n- Test coverage reporting","status":"closed","priority":0,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T09:32:47.184961+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T09:50:02.228743+05:30","closed_at":"2026-01-19T09:50:02.228743+05:30","close_reason":"Testing infrastructure complete: unit tests, integration tests, CI pipeline, coverage reporting"}
{"id":"wt-7vr","title":"wt auto: Fix failed-send on subsequent beads","description":"When processing multiple beads in wt auto, beads 2+ can fail with 'failed-send' error.\n\n## Observed\n```\n=== Bead 1/3: wt-tcf ===\n✓ Bead wt-tcf completed\n\n=== Bead 2/3: wt-1a3 ===\nWarning: bead wt-1a3 failed (failed-send), continuing...\n\n=== Bead 3/3: wt-hvx ===\nWarning: bead wt-hvx failed (failed-send), continuing...\n```\n\n## Likely Cause\n- Session state issue after first bead completes\n- Timing issue with prompt delivery\n- tmux session may be in unexpected state\n\n## Fix\n- Investigate session state between beads\n- Ensure clean state before sending next prompt\n- May need to wait for Claude to be ready again between beads","status":"closed","priority":1,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T12:30:45.893082+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T12:39:51.563299+05:30","closed_at":"2026-01-25T12:39:51.563299+05:30","close_reason":"Closed"}
{"id":"wt-805","title":"wt auto: prefix fallback in getEpicBeads includes unrelated beads","description":"When running wt auto --epic \u003cid\u003e, if bd dep list returns no results, getEpicBeads() at internal/auto/auto.go:868-876 falls back to prefix matching, collecting ALL ready beads with the same prefix instead of just the epic's children. This happens because parent-child relationships (ohio.1, ohio.2) aren't returned by the dep query. The fallback silently includes unrelated beads in batch processing. Fix: query children explicitly via bd show --json (which shows CHILDREN), or error out instead of prefix fallback.","status":"closed","priority":1,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-29T18:18:35.477838+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-29T18:49:23.260853+05:30","closed_at":"2026-01-29T18:49:23.260853+05:30","close_reason":"Fixed - prefix fallback removed"}
{"id":"wt-82u","title":"Include session name in worker commit messages","description":"Like gastown, include the wt session name (e.g., 'po', 'tigress') in commit messages for traceability.\n\nExample commit message:\n  Fix worktree collision bug\n\n  Co-Authored-By: Claude Opus 4.5 \u003cnoreply@anthropic.com\u003e\n  Session: wt-po\n\nThis helps track which worker session produced which commits, useful for debugging and audit trails.\n\nImplementation:\n- Pass session name to worker via environment variable (e.g., WT_SESSION)\n- Worker includes it in commit message footer\n- Update initial prompt to instruct workers to include session name","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-21T12:33:45.183724+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T16:38:00.497433+05:30","closed_at":"2026-01-21T16:38:00.497433+05:30","close_reason":"Closed"}
{"id":"wt-85w","title":"Symlink project .claude/ into worktrees","description":"Workers don't see project-specific MCP configs because .claude/ is gitignored and missing from worktrees. On session creation, symlink the main repo's .claude/ into the worktree so workers inherit MCP servers, project settings, hooks, etc.","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-21T17:13:43.411322+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T17:47:29.22142+05:30","closed_at":"2026-01-21T17:47:29.22142+05:30","close_reason":"Implemented SymlinkClaudeDir function that creates symlinks to main repo's .claude/ during worktree creation"}
{"id":"wt-8g0","title":"Add wt hub command for dedicated orchestration session","description":"Add a `wt hub` command that creates/attaches to a dedicated orchestration session.\n\n## Problem\nCurrently any session can act as a hub, but there's no dedicated hub concept. This leads to:\n- Mixing orchestration with direct work\n- Unclear handoff semantics (what state are we preserving?)\n- No persistent orchestration session that survives across Claude instances\n\n## Proposed Solution\n\n### `wt hub` command\n```bash\nwt hub              # Create or attach to hub session\nwt hub --detach     # Detach from hub (return to previous session)\nwt hub --status     # Show hub status without attaching\n```\n\n### Behavior\n1. Creates tmux session named \"hub\" if it doesn't exist\n2. Sets working directory to a neutral location (e.g., ~/.config/wt or ~)\n3. Launches Claude with hub-specific context\n4. If hub exists, attaches to it\n\n### Hub Session Characteristics\n- Never has a worktree (it's not a worker)\n- BEADS_DIR not set (uses bd's project detection or explicit project args)\n- Has access to all projects via `wt projects`\n- `wt handoff` works cleanly - preserves orchestration state only\n- `wt prime` recovers hub context on restart\n\n### Integration\n- `wt` from hub shows all workers across all projects\n- `wt new \u003cbead\u003e` spawns workers\n- `wt watch` monitors all workers\n- `wt handoff` cycles hub Claude while preserving state\n\n## Open Questions\n- Should hub auto-start Claude or just create the tmux session?\n- Should there be hub-specific hooks (on_hub_start, on_hub_handoff)?\n- How to handle multiple hubs (probably disallow - one hub per wt installation)?","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T17:36:52.778279+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T17:44:27.620374+05:30","closed_at":"2026-01-19T17:44:27.620374+05:30","close_reason":"Implemented wt hub command with tests, integration tests, and documentation"}
{"id":"wt-8wf","title":"wt auto --project: serial queue processing for non-epic beads","description":"## Discussion\nConsolidate orchestration modes under wt auto:\n\n- `wt auto --epic X` - batch epic (single worktree, builds on previous)\n- `wt auto --project X` - serial queue (separate worktrees per bead)\n\nKeep `wt watch` for monitoring/nudging only (wt-ak7).\n\n## Open Questions\n- Should --project process all ready beads or filter by priority?\n- How to handle bead selection order?\n- Should it respect epic groupings or ignore them?\n\n## Related\n- wt-ak7: wt watch nudging feature","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-26T13:29:58.783966+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-30T18:38:43.034429+05:30","closed_at":"2026-01-30T18:38:43.034429+05:30","close_reason":"Added --project mode to wt auto for serial queue processing with separate worktrees","labels":["auto"]}
{"id":"wt-924","title":"Phase 5: Monitoring","description":"Implement session monitoring:\n- wt watch: Live dashboard with refresh\n- Idle detection from tmux pane output\n- Desktop notifications (macOS/Linux)\n- PR status in dashboard\n- Status indicators (working/idle/error)","status":"closed","priority":2,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T09:32:11.593224+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T11:22:53.37686+05:30","closed_at":"2026-01-19T11:22:53.37686+05:30","close_reason":"Closed","dependencies":[{"issue_id":"wt-924","depends_on_id":"wt-661","type":"blocks","created_at":"2026-01-19T09:32:21.233276+05:30","created_by":"Lakshmi Narasimhan"}]}
{"id":"wt-952","title":"Interactive project onboarding for wt project add","description":"wt project add should:\n1. Detect the current checked-out branch\n2. Prompt to confirm or select a different base branch\n3. Ask for merge mode preference\n4. Show a summary and confirm before registering\n\nCurrently it just accepts args and registers without any confirmation.","status":"closed","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T07:25:02.315628+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T11:46:37.261687+05:30","closed_at":"2026-01-25T11:46:37.261687+05:30","close_reason":"Closed"}
{"id":"wt-98c","title":"Support multiple branches per repo via project config","description":"Allow registering the same repo with different branches as separate projects. Enables feature branch workflows where multiple beads contribute to a feature branch before merging to main.\n\n**Project onboarding changes:**\n- Identify repo canonically (git remote URL)\n- Discover and store beads_prefix from .beads/\n- Add --branch flag to `wt project add`\n- Validate beads_prefix matches when registering same repo with different branch\n\n**Project config structure:**\n```json\n{\n  \"name\": \"reddit-saas-scoring\",\n  \"path\": \"~/code/reddit-saas\",\n  \"repo\": \"github.com:badri/reddit-saas.git\",\n  \"beads_prefix\": \"reddit-saas\",\n  \"branch\": \"feature/user-scoring\"\n}\n```\n\n**Spawn changes:**\n- `wt new \u003cbead\u003e -p \u003cproject\u003e` uses project's branch config\n- Worktree created from project's branch (not always main)\n- `wt done` targets project's branch\n\n**Workflow:**\n1. `wt project add reddit-saas ~/code/reddit-saas --branch main`\n2. `wt project add reddit-saas-scoring ~/code/reddit-saas --branch feature/user-scoring`\n3. `wt create reddit-saas-scoring \"Add scoring\"` → reddit-saas-xyz (shared .beads/)\n4. `wt new reddit-saas-xyz -p reddit-saas-scoring` → worktree from feature branch\n5. `wt done` → merges to feature/user-scoring\n6. When feature complete, PR feature branch to main, beads sync via git","status":"closed","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-23T09:11:10.052127+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-23T22:31:57.853012+05:30","closed_at":"2026-01-23T22:31:57.853012+05:30","close_reason":"Closed"}
{"id":"wt-9n6","title":"Integration tests","description":"End-to-end integration tests:\n- Full workflow: new -\u003e work -\u003e done -\u003e close\n- Multi-session scenarios\n- Project registration and switching\n- Test environment lifecycle (docker compose)\n- Merge mode flows (direct, pr-auto, pr-review)\n- Seance functionality\n- Error recovery scenarios\n- Cleanup verification\n\nUse real tmux, real git worktrees, real beads (in temp dirs).","status":"closed","priority":1,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T09:32:56.788809+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T12:23:06.799955+05:30","closed_at":"2026-01-19T12:23:06.799955+05:30","close_reason":"Added comprehensive integration tests covering events, merge, multi-session, seance, port offset allocation, and cleanup scenarios","dependencies":[{"issue_id":"wt-9n6","depends_on_id":"wt-wjo","type":"blocks","created_at":"2026-01-19T10:00:25.903074+05:30","created_by":"Lakshmi Narasimhan"}]}
{"id":"wt-a9y","title":"wt auto: Don't close epic if beads failed","description":"wt auto closes the epic even when beads fail.\n\n## Observed\n```\n=== Bead 1/3: wt-tcf ===\n✓ Bead wt-tcf completed\n\n=== Bead 2/3: wt-1a3 ===\nWarning: bead wt-1a3 failed (failed-send), continuing...\n\n=== Bead 3/3: wt-hvx ===\nWarning: bead wt-hvx failed (failed-send), continuing...\n\n=== All 3 bead(s) completed ===\n✓ Epic wt-g0w closed   \u003c-- Should NOT close!\n```\n\n## Expected\n- Epic should only close if ALL beads succeeded\n- If any bead failed, epic stays open\n- Report which beads failed and need retry\n\n## Fix\n- Track success/failure per bead\n- Only close epic if all beads succeeded\n- On partial failure: report status, keep epic open","status":"closed","priority":1,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T12:30:49.017624+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T12:48:42.757366+05:30","closed_at":"2026-01-25T12:48:42.757366+05:30","close_reason":"Closed"}
{"id":"wt-ack","title":"Cross-project coordination: contracts vs dependencies","description":"Discussion on how wt should handle cross-project work coordination.\n\n## The Problem\n\nWhen features span multiple projects (e.g., gw-backend + gw-frontend for Autopilot), how do we track dependencies and coordinate work?\n\n## Key Insight: Contracts vs Dependencies\n\nNot all cross-project relationships are blocking dependencies.\n\n```\n                    ┌─────────────────────┐\n                    │  API Contract       │\n                    │  (Shared spec)      │\n                    └──────────┬──────────┘\n                               │\n              ┌────────────────┴────────────────┐\n              ▼                                 ▼\n    ┌─────────────────┐               ┌─────────────────┐\n    │  Backend        │               │  Frontend       │\n    │  (Implement)    │               │  (Build w/mocks)│\n    └─────────────────┘               └─────────────────┘\n```\n\n- **Contract-based:** Both teams work in parallel against shared spec\n- **Dependency-based:** One blocks the other\n\nMost cross-project features are contract-based, not dependency-based.\n\n## Current State\n\n| Feature | bd | wt |\n|---------|-----|-----|\n| Cross-project ready aggregation | ❌ | ✅ wt ready |\n| Workspace/hub concept | ❌ | ✅ wt hub |\n| Cross-project deps | ⚠️ capability-based | ❌ |\n\nbd supports external deps via capability labels:\n```yaml\n# project-a/.beads/config.yaml\nexternal_projects:\n  project-b: ../project-b\n\n# Then:\nbd dep add issue-a external:project-b:provides:some-capability\n```\n\n## Options for wt\n\n### Option A: Use bd's external_projects (no wt changes)\n- Configure external_projects in each project's .beads/config.yaml\n- Use provides: labels for capabilities\n- Verbose but works today\n\n### Option B: wt cross-project dependencies\n```bash\nwt dep add frontend-task backend-task  # direct cross-project\nwt ready  # respects cross-deps\n```\n- New feature in wt\n- Direct issue-to-issue links\n- wt becomes the cross-project coordination layer\n\n### Option C: wt cross-project contracts (non-blocking links)\n```bash\nwt contract create \"Autopilot API\" --spec gw-backend-3ulq\nwt contract link gw-frontend-uux \"Autopilot API\"\n```\n- Track which beads share a contract\n- Not blocking, just informational\n- Helps with \"what else uses this API?\" queries\n\n### Option D: Hub beads for coordination\n- Use ~/.config/wt/.beads/ for cross-project tracking\n- Create coordination epics that reference both projects\n- Manual but uses existing bd\n\n## Recommendation\n\n1. Most cross-project work is contract-based → parallel execution fine\n2. For rare true dependencies → use bd's external_projects capability system\n3. Consider Option C (contracts as first-class concept) for future\n4. wt's value is aggregation + orchestration, not dependency tracking\n\n## Related\n- wt-5xf: Per-project locks for parallel auto\n- gw-backend-3ulq: Example API contract bead","status":"open","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-26T09:52:13.304736+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-26T09:52:13.304736+05:30","labels":["auto"]}
{"id":"wt-ak7","title":"wt watch: auto-detect and nudge stuck/interrupted sessions","description":"## Problem\nWorkers can get stuck in various states:\n- Claude interrupted waiting for input\n- Commands failed that need retry (e.g., git tracking issues)\n- Session idle after completing work but not signaling done\n- **Serial workers completed but not cycling to next bead**\n\nCurrently requires manual intervention to detect and nudge.\n\n## Proposed Solution\nEnhance `wt watch` daemon to be the unified orchestrator:\n\n### 1. Auto-detect stuck states:\n- Parse tmux pane output for 'Interrupted' keyword\n- Detect idle sessions (no activity for N minutes)\n- Detect failed commands that are recoverable\n\n### 2. Auto-nudge stuck sessions:\n- Send appropriate nudge via tmux send-keys\n- For interrupted: send retry command or Enter\n- For failed git: fix common issues (set upstream, etc.)\n- Log all nudges for audit\n\n### 3. Serial worker orchestration (NEW):\n- Detect when worker completes bead (bead closed, session idle)\n- Auto-kill completed worker\n- Spawn next ready bead from same project\n- Configurable: `--serial-mode \u003cproject\u003e` or per-project config\n\n### 4. Alert (optional):\n- Desktop notification when intervention needed\n- Escalate if auto-nudge fails\n\n## Example\n```\nwt watch                          # Monitor all sessions\nwt watch --auto-nudge             # Enable auto-recovery\nwt watch --serial gw-frontend     # Auto-cycle frontend beads\nwt watch --serial-all             # Auto-cycle all projects\n```\n\n## Unified Flow\n- **auto mode**: wt signal bead-done handles transitions\n- **serial mode**: wt watch detects completion, kills worker, spawns next\n- Both modes benefit from stuck detection + nudging\n\n## Acceptance Criteria\n- Detects 'Interrupted' state in worker sessions\n- Auto-sends nudge for recoverable situations\n- Detects completed serial workers and cycles to next bead\n- Logs all interventions\n- Configurable idle timeout and serial mode","status":"closed","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-26T13:12:11.043921+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-30T18:22:04.467533+05:30","closed_at":"2026-01-30T18:22:04.467533+05:30","close_reason":"Implemented stuck detection (interrupted + idle) and auto-nudge in wt watch TUI","labels":["auto"]}
{"id":"wt-aol","title":"wt auto: Require epic for batch processing","description":"Change wt auto to use single-worktree-per-epic model:\n\n## Core Concept\nInstead of 1 worktree per bead (N PRs), create 1 worktree for the entire epic:\n\n```\nwt auto --epic wt-xxx\n\n1. Runs wt audit --epic (implicit, catches issues early)\n2. Creates worktree 'po' from project's default_branch\n3. Process bead-1 → commit to po\n4. Process bead-2 → commit to po (builds on bead-1)\n5. Process bead-3 → commit to po (builds on bead-1,2)\n6. Creates 1 PR/merge from po → default_branch\n```\n\n## Behavior\n1. `wt auto` without epic = error (requires explicit batch)\n2. `wt auto --epic \u003cid\u003e`:\n   - Implicit `wt audit --epic` first (blocks if not ready)\n   - Creates single worktree for epic\n   - Processes beads sequentially into shared worktree\n   - One PR/merge at end per project merge_mode\n   - Epic auto-closes when merge completes\n\n## Workflow\n```bash\n# Group work into epic\nbd create \"Documentation batch\" -t epic\nbd dep wt-tcf --blocks wt-doc-epic\nbd dep wt-1a3 --blocks wt-doc-epic\nbd dep wt-hvx --blocks wt-doc-epic\n\n# Run batch (audit runs implicitly)\nwt auto --epic wt-doc-epic\n# → Audits, creates worktree, processes 3 beads, creates 1 PR\n```\n\n## Flags\n- `--epic \u003cid\u003e` (required) - Epic to process\n- `--dry-run` - Preview without executing (includes audit)\n- `--timeout \u003cmin\u003e` - Per-bead timeout (default: 30)\n- `--pause-on-failure` - Stop and preserve worktree if bead fails\n- `--skip-audit` - Bypass implicit audit (use with caution)\n\n## Implicit Audit Checks\nBefore starting, wt auto runs audit and blocks if:\n- Multiple beads modify same files (conflict risk)\n- Beads from different projects (not supported)\n- External blockers exist\n- Beads not ready (missing context)\n\nUse `--skip-audit` to bypass (e.g., you already resolved warnings).\n\n## Failure Handling\n- If bead-2 fails mid-batch:\n  - Worktree preserved with partial work\n  - Status: `wt auto --check` shows failed bead\n  - Options: fix manually and `wt auto --resume`, or `wt auto --abort`\n\n## Benefits\n- Single PR for cohesive changes\n- Cleaner git history\n- Atomic rollback (revert one merge)\n- Beads can build on each other's work\n- No accidental \"process everything\" footgun\n- Early failure via implicit audit","status":"closed","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T11:51:25.518152+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T12:09:49.974821+05:30","closed_at":"2026-01-25T12:09:49.974821+05:30","close_reason":"Closed"}
{"id":"wt-b00","title":"Hub notification when workers complete","description":"Configure wt events --new --clear as a prompt-submit hook so the hub gets notified when workers complete, signal status changes, or encounter errors. Currently hub has no visibility unless manually checking wt events.","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-21T17:10:12.567904+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T17:38:17.206993+05:30","closed_at":"2026-01-21T17:38:17.206993+05:30","close_reason":"Hub discipline - hub checks wt events proactively, no tooling needed"}
{"id":"wt-be7","title":"Add --json flag for machine-readable output","description":"Add --json flag to wt commands for machine-readable output.\n\nUseful for:\n- LLM/AI agent consumption (skills, automation)\n- Scripting and pipelines\n- Integration with other tools\n\nCommands to support:\n- wt projects (list projects as JSON array)\n- wt list (list sessions as JSON array)\n- wt status (session status as JSON object)\n- wt ready (ready beads as JSON array)\n- wt beads (beads list as JSON array)\n\nImplementation:\n- Add global --json flag or per-command flag\n- When set, output structured JSON instead of styled text\n- Ensure consistent schema across commands","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-20T13:20:16.038604+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-20T18:08:18.440399+05:30","closed_at":"2026-01-20T18:08:18.440399+05:30","close_reason":"Implemented --json flag for list, projects, ready, beads, and status commands"}
{"id":"wt-bmx","title":"Test bead","status":"tombstone","priority":2,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-21T17:10:09.626142+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T17:10:22.550835+05:30","deleted_at":"2026-01-21T17:10:22.550835+05:30","deleted_by":"Lakshmi Narasimhan","delete_reason":"delete","original_type":"task"}
{"id":"wt-bqf","title":"Phase 1: Core commands (list, new, switch, kill, close)","description":"Implement core wt commands:\n- wt / wt list: List all active sessions\n- wt new \u003cbead\u003e: Spawn worker with namepool\n- wt \u003cname\u003e: Switch to session\n- wt kill \u003cname\u003e: Terminate session\n- wt close \u003cname\u003e: Complete + cleanup\n- Session state tracking (sessions.json)\n- Namepool management\n- BEADS_DIR per session","status":"closed","priority":0,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T09:31:51.606393+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T09:42:56.785158+05:30","closed_at":"2026-01-19T09:42:56.785158+05:30","close_reason":"Implemented all Phase 1 core commands"}
{"id":"wt-c7s","title":"Add wt task for non-bead sessions with completion conditions","description":"Hub can spawn lightweight task sessions (not beads) for transient work like MCP queries, PR conflict resolution, quick investigations. Tasks have explicit completion conditions (pr-merged, pushed, tests-pass, user-confirms). wt done behavior varies by condition. Beads remain the default for strategic work.","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-20T19:36:24.080331+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T16:28:27.090122+05:30","closed_at":"2026-01-21T16:28:27.090122+05:30","close_reason":"Closed"}
{"id":"wt-chm","title":"wt auto: orchestrator pastes next bead prompt into running Claude session instead of restarting","description":"When transitioning between beads, the orchestrator sends the next claude CLI command via tmux send-keys into the already-running Claude REPL session. Claude interprets it as chat text, not a shell command. The orchestrator needs to: (1) exit the current Claude session (send /exit or Ctrl+C), (2) wait for the shell prompt, (3) then send the next 'claude --dangerously-skip-permissions -p ...' command. Currently all subsequent beads after bead 1 fail because Claude sees the command as a pasted message.","status":"closed","priority":0,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-30T11:52:44.499379+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-30T12:18:23.349606+05:30","closed_at":"2026-01-30T12:18:23.349606+05:30","close_reason":"Use --shell flag in createEpicWorktree so Claude doesn't auto-start. runClaudeInSession now launches claude from a shell prompt instead of pasting into a running REPL.","comments":[{"id":1,"issue_id":"wt-chm","author":"Lakshmi Narasimhan","text":"Fix 0bd0868 didn't resolve the issue. The orchestrator still pastes the next 'claude -p ...' command directly into the running Claude REPL session. It needs to: (1) send /exit or Ctrl+C to the tmux pane to exit Claude, (2) wait for the shell prompt (e.g., detect '➜' or '$'), (3) THEN send the next claude command. Currently step 1 is not happening — verified with screenshots showing both backend and frontend workers receiving the command as REPL input.","created_at":"2026-01-30T06:46:05Z"}]}
{"id":"wt-cmy","title":"Phase 1: Dual-write messaging in processEpic","description":"Implement dual-write messaging alongside existing tmux polling in processEpic(). Orchestrator sends TASK messages when assigning beads and wt signal bead-done sends DONE messages to the store. No behavior change — tmux polling still drives orchestration. This validates the message flow without risk.\n\n## Changes\n- Add msg.Store field to Runner, open/close in Run()\n- In processEpic() bead loop: Send TASK message when starting each bead\n- In cmdSignal bead-done handler: Send DONE message with commit info\n- On failure: Send STUCK message with reason\n\n## Reference\n- docs/designs/messaging-integration.md (Phase 1 section)\n- internal/msg/store.go (message store API)","status":"in_progress","priority":1,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-30T15:55:31.625016+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-30T18:44:30.767425+05:30","labels":["auto"]}
{"id":"wt-crn","title":"Add Claude hook to run go fmt before git commit","description":"Add a Claude Code hook that automatically runs 'go fmt ./...' before git commit/push operations. This ensures code is always formatted before being committed.\n\nHook should:\n- Trigger on PreToolUse for Bash tool when command contains 'git commit' or 'git push'\n- Run 'go fmt ./...' and 'go vet ./...'\n- Block commit if formatting changes files (user should review)\n- Could also run tests optionally\n\nReference: Claude Code hooks documentation for PreToolUse hooks.","status":"closed","priority":2,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-20T20:06:03.227232+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-20T20:19:21.244149+05:30","closed_at":"2026-01-20T20:19:21.244149+05:30","close_reason":"Added go fmt hook that runs before git commits"}
{"id":"wt-cyr","title":"Allow creating bead from within a task session","description":"When a task session discovers something that needs tracked work (e.g., MCP query reveals a bug), user should be able to create a bead from within the session. Could be wt promote or wt bead create. The new bead captures context from the current task.","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-20T19:36:26.552341+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T17:11:23.828018+05:30","closed_at":"2026-01-21T17:11:23.828018+05:30","close_reason":"Closed","dependencies":[{"issue_id":"wt-cyr","depends_on_id":"wt-c7s","type":"blocks","created_at":"2026-01-20T19:36:36.411133+05:30","created_by":"Lakshmi Narasimhan"}]}
{"id":"wt-cyu","title":"Add MkDocs Material documentation site for wt","description":"Set up MkDocs with Material theme for GitHub Pages hosting. Create documentation covering: installation, getting started, all commands, concepts (worktrees, sessions, beads integration), and examples.","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-20T19:03:30.87063+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-20T19:12:31.739559+05:30","closed_at":"2026-01-20T19:12:31.739559+05:30","close_reason":"Documentation site set up with MkDocs Material theme. Created comprehensive docs covering installation, concepts, commands, guides, and reference. Added GitHub Actions workflow for automatic deployment to GitHub Pages."}
{"id":"wt-d1b","title":"Add wt events command with event logging","description":"Implement event logging for Claude Code integration.\n\nCommands:\n- wt events: show recent events\n- wt events --tail: follow mode\n- wt events --since 5m: filter by time\n- wt events --new --clear: show new events and clear (for hooks)\n\nEvents logged to ~/.config/wt/events.log by:\n- wt done (session completed)\n- wt close (session closed)\n- wt kill (session killed)\n- PR status changes (if detected)\n\nEvent format (JSON lines):\n{\"time\":\"...\",\"type\":\"session_ended\",\"session\":\"pine\",\"bead\":\"wt-661\"}\n\nIntegration with Claude Code hooks:\n- Add to prompt-submit hook to show new events in conversation\n- Example: {\"hooks\":{\"prompt-submit\":[\"wt events --new --clear\"]}}","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T11:55:34.603691+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T13:18:43.74182+05:30","closed_at":"2026-01-19T13:18:43.74182+05:30","close_reason":"Implemented wt events command with --tail, --since, --new, --clear flags for Claude Code hook integration"}
{"id":"wt-djj","title":"Add --limit N flag to wt auto","description":"Allow limiting the number of beads processed in a single auto run. Useful for testing or controlled batch processing. Default should be unlimited.","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-21T20:57:54.251552+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T22:02:20.365267+05:30","closed_at":"2026-01-21T22:02:20.365267+05:30","close_reason":"Closed"}
{"id":"wt-e6j","title":"Add wt doctor command","description":"wt doctor command to diagnose setup issues:\n- tmux installed and running\n- git available\n- beads initialized (.beads/ exists)\n- worktree base directory exists/writable\n- config file valid\n- orphaned worktrees/sessions detection","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T13:02:54.52293+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T13:26:08.966555+05:30","closed_at":"2026-01-19T13:26:08.966555+05:30","close_reason":"Implemented wt doctor command with checks for tmux, git, beads, worktree root, config, and orphan detection"}
{"id":"wt-edt","title":"Add shell completions (bash/zsh/fish)","status":"closed","priority":2,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T13:50:52.141895+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T14:00:35.04434+05:30","closed_at":"2026-01-19T14:00:35.04434+05:30","close_reason":"Implemented wt completion command for bash/zsh/fish"}
{"id":"wt-f3p","title":"Add wt ready command with optional project filter","description":"Implement wt ready command that lists beads ready to work on (no blockers).\n\nFeatures:\n- List ready beads from bd ready\n- Optional project filter: wt ready [project]\n- Show bead ID, title, priority, project\n- Add bead.Ready() function to parse bd ready output\n\nThis enables users to see available work without leaving wt context.","status":"closed","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T10:34:59.558996+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T11:04:41.72646+05:30","closed_at":"2026-01-19T11:04:41.72646+05:30","close_reason":"Closed"}
{"id":"wt-fir","title":"Add fuzzy matching to wt seance","description":"Make wt seance name argument fuzzy:\n- Exact session name match\n- Match by bead ID\n- Match by project prefix\n\nExample: wt seance wt-661 finds session that worked on bead wt-661","status":"closed","priority":3,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T12:12:35.879094+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T13:39:08.222199+05:30","closed_at":"2026-01-19T13:39:08.222199+05:30","close_reason":"Implemented fuzzy matching: session name \u003e bead ID \u003e project"}
{"id":"wt-ftg","title":"Claude skill: /wt","description":"Create Claude Code skill for wt:\n- Skill file at ~/.claude/skills/wt.md\n- Hub commands (list, new, switch, watch, close)\n- Worker commands (status, done, close)\n- Seance commands\n- Workflow examples\n- Install as part of wt install command","status":"closed","priority":1,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T09:41:22.955866+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T12:59:30.573102+05:30","closed_at":"2026-01-19T12:59:30.573102+05:30","close_reason":"Skill implemented and installed at ~/.claude/skills/wt","dependencies":[{"issue_id":"wt-ftg","depends_on_id":"wt-bqf","type":"blocks","created_at":"2026-01-19T09:41:28.427271+05:30","created_by":"Lakshmi Narasimhan"},{"issue_id":"wt-ftg","depends_on_id":"wt-wjo","type":"blocks","created_at":"2026-01-19T10:00:25.830325+05:30","created_by":"Lakshmi Narasimhan"}]}
{"id":"wt-g0w","title":"Documentation P2 batch","status":"closed","priority":2,"issue_type":"epic","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T12:20:17.832866+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T12:28:57.034135+05:30","closed_at":"2026-01-25T12:28:57.034135+05:30","close_reason":"Closed","dependencies":[{"issue_id":"wt-g0w","depends_on_id":"wt-tcf","type":"blocks","created_at":"2026-01-25T12:20:22.699222+05:30","created_by":"Lakshmi Narasimhan"},{"issue_id":"wt-g0w","depends_on_id":"wt-1a3","type":"blocks","created_at":"2026-01-25T12:20:22.800884+05:30","created_by":"Lakshmi Narasimhan"},{"issue_id":"wt-g0w","depends_on_id":"wt-hvx","type":"blocks","created_at":"2026-01-25T12:20:22.905011+05:30","created_by":"Lakshmi Narasimhan"}]}
{"id":"wt-gek","title":"Context recovery after session compaction","description":"When a worker session runs out of context and Claude compacts, the worker loses context about the bead/task and what it was doing. Implement context recovery:\n\n1. Detect compaction occurred (hook or marker file)\n2. Auto-run wt prime to reinject: bead details, session info, work summary (git diff/log)\n3. Optional: checkpoint progress to .wt/checkpoint.md before compaction\n4. Notify hub that worker compacted\n\nCould leverage bd prime mechanics. Critical for long-running workers.","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-20T19:39:48.093216+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T18:18:54.752691+05:30","closed_at":"2026-01-21T18:18:54.752691+05:30","close_reason":"Closed"}
{"id":"wt-h1v","title":"wt audit: Bead readiness checker","description":"Add `wt audit \u003cbead-or-epic\u003e` subcommand that:\n\n1. Reads bead description + linked beads\n2. Scans relevant source code based on bead context\n3. Cross-references: checks if referenced files/functions exist, identifies gaps\n4. Generates a readiness report with:\n   - Clarity score (Ready / Partial / Not Ready)\n   - What's well-defined\n   - Missing context\n   - Suggested clarifying questions\n5. Optional interactive mode:\n   - Asks clarifying questions\n   - User answers\n   - Updates bead description with new context\n   - Re-audits until Ready status\n\nThis improves bead quality before implementation starts and ensures fresh Claude sessions have sufficient context.\n\nExample output:\n```\nAudit: gw-backend-xyz \"Autopilot orchestrator task\"\n\nReadiness: Partial (3 issues)\n\n✓ References existing code:\n  - app/tasks/celery_config.py\n  - app/services/note_generator.py\n\n✗ Missing context:\n  - Which table stores autopilot settings?\n  - No acceptance criteria defined\n\n? Suggested questions:\n  1. Should the task run daily or more frequently?\n  2. What happens if generation fails mid-run?\n\n[Enter interactive mode to resolve? y/n]\n```","status":"closed","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T09:20:28.171476+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T11:46:37.361607+05:30","closed_at":"2026-01-25T11:46:37.361607+05:30","close_reason":"Closed"}
{"id":"wt-h1z","title":"Spike: Prototype native Go messaging for wt","description":"Build native Go messaging for wt, inspired by MCP Agent Mail's protocol (from PR #2 spike).\n\n## Architecture\n- SQLite-backed message store in .wt/messages.db (no external deps)\n- wt msg send/recv CLI commands for workers\n- Orchestrator reads directly from the store\n- Git-synced artifacts for audit trail (like beads)\n\n## Message Protocol (borrowed from Agent Mail spike)\n- TASK: orchestrator assigns bead to worker\n- DONE: worker signals completion with summary\n- STUCK: worker signals it's blocked, needs help\n- PROGRESS: worker reports status updates\n- ACK model: messages must be acknowledged\n\n## Key Design Points\n- Zero external dependencies (no Python server, no network)\n- SQLite for reliable local storage\n- File reservation support for future parallel workers\n- Crash recovery: orchestrator reads unacked messages on restart\n\n## Reference\n- PR #2 (MCP Agent Mail client): protocol design, test patterns\n- wt-wy7 findings: external dep is the dealbreaker, protocol is good\n\n## Deliverables\n- internal/msg/ package with SQLite store\n- wt msg send/recv commands\n- Integration point in internal/auto/ (replace tmux polling)","status":"closed","priority":1,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-27T08:10:25.840985+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-30T15:50:38.504833+05:30","closed_at":"2026-01-30T15:50:38.504833+05:30","close_reason":"Spike complete: internal/msg package with SQLite store, CLI commands, 8 passing tests"}
{"id":"wt-hfd","title":"Enhanced wt list with history and filtering","description":"Extend wt list to show past sessions and support filtering:\n\nDisplay enhancements:\n- Show session duration (created → closed)\n- Show completion time\n\nFiltering options:\n- --project \u003cname\u003e: Filter by project\n- --since \u003cduration\u003e: Filter by time (e.g., --since 1d, --since 1w)\n- --status \u003cstatus\u003e: Filter by status (completed, killed, abandoned)\n- --all: Include past sessions (default: active only)\n\nExamples:\n  wt list --all                    # Active + past sessions\n  wt list --project wt             # Only wt sessions\n  wt list --since 1d               # Last 24 hours\n  wt list --all --project supabyoi --since 1w\n\nData source: Combine active sessions (sessions.json) with events log for history.","status":"closed","priority":3,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-21T12:43:20.862756+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T17:50:36.1379+05:30","closed_at":"2026-01-21T17:50:36.1379+05:30","close_reason":"Closed"}
{"id":"wt-hhf","title":"Hub-specific MCP configuration","description":"Support hub-specific MCP servers that don't pollute worker sessions or other Claude invocations.\n\n## Problem\n\nMCPs configured at user level (~/.claude.json) are loaded for ALL Claude sessions:\n- Worker sessions (don't need hub orchestration tools)\n- Other projects (unrelated MCPs in context)\n- Wastes context window on irrelevant MCP schemas\n\nHub often needs MCPs that workers don't:\n- Reddit (research, monitoring discussions)\n- GitHub (cross-repo PR management)\n- Slack/Discord (notifications)\n- Analytics dashboards\n\n## Solution\n\nHub-specific MCP config at ~/.config/wt/.mcp.json\n\n```json\n{\n  \"mcpServers\": {\n    \"reddit\": {\n      \"command\": \"...\",\n      \"args\": [],\n      \"env\": {}\n    },\n    \"github-hub\": {\n      \"command\": \"gh-mcp\",\n      \"args\": [\"--multi-repo\"]\n    }\n  }\n}\n```\n\n## Implementation\n\n### Option A: Symlink on hub start\nWhen `wt hub` starts:\n1. Check for ~/.config/wt/.mcp.json\n2. Symlink or copy to hub session's working directory\n3. Claude picks it up as project-scope MCP\n\n### Option B: Environment variable\nSet MCP config path when spawning hub Claude:\n```bash\nCLAUDE_MCP_CONFIG=~/.config/wt/.mcp.json claude\n```\n(Need to verify if Claude supports this)\n\n### Option C: Hub working directory\nChange hub working directory to ~/.config/wt/ instead of ~\n- Hub's .mcp.json is naturally in project scope\n- May have other implications for file paths\n\n## UX\n\n```bash\n# Configure hub MCPs\nwt hub mcp add reddit --command \"...\" \nwt hub mcp list\nwt hub mcp remove reddit\n\n# Or edit directly\n$EDITOR ~/.config/wt/.mcp.json\n```\n\n## Worker Isolation\n\nWorkers should NOT inherit hub MCPs:\n- Workers spawn in project worktrees\n- They get project-level .mcp.json if it exists\n- Hub MCPs stay in hub\n\n## Related\n- Claude Code MCP scopes: project, user, managed\n- wt hub command","notes":"## Core Rationale\n\nHub is where **grooming** happens. Grooming needs MCPs that the project being groomed doesn't need:\n\n| Hub Activity | MCP Needed | Project Needs It? |\n|--------------|------------|-------------------|\n| Research user pain points | Reddit | ❌ |\n| Check API best practices | Web search | ❌ |\n| Review competitor features | Web fetch | ❌ |\n| Cross-repo PR status | GitHub (multi-repo) | ❌ (project has its own) |\n| Summarize docs | PDF reader | ❌ |\n\n**Hub grooms → Worker implements**\n\nHub MCPs support grooming/orchestration.\nProject MCPs support implementation.\nDifferent concerns, different tools.","status":"open","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-26T10:08:34.478106+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-26T10:09:27.797147+05:30"}
{"id":"wt-hvx","title":"Update wt description to Claude Code orchestrator","description":"Change the description of wt from 'Worktree session manager for AI-assisted development' to 'Claude Code orchestrator' (or similar). Update in:\n- CLI help text\n- README and docs\n- Any other places the description appears","status":"closed","priority":2,"issue_type":"chore","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T07:25:05.664153+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T12:28:56.953506+05:30","closed_at":"2026-01-25T12:28:56.953506+05:30","close_reason":"Closed"}
{"id":"wt-hy1","title":"wt auto double-pastes prompt after submission","description":"Two related issues with wt new/auto prompt handling:\n\n**Issue 1: Send-keys fix too narrow**\nThe temp-file fix (78616fe) only applied to internal/auto/auto.go.\nBut send-keys is also used in:\n- internal/tmux/tmux.go (core)\n- internal/hub/hub.go\n\n`wt new` still double-pastes because it uses a different code path.\nFix should apply to ALL send-keys usages or be in the core tmux module.\n\n**Issue 2: Bead info missing from prompt**\nWhen spawning via `wt new`, the prompt sent to the worker only contains generic workflow instructions:\n- Commit message format\n- Conflict resolution\n- wt done usage\n\nBut it's MISSING:\n- Bead ID and title\n- Bead description (the actual task!)\n\nWorker has no idea what to work on.\n\n**Expected prompt should include:**\n```\nWork on bead wt-xyz: \u003ctitle\u003e\n\n\u003cdescription\u003e\n\nWorkflow:\n...\n```","status":"closed","priority":1,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-21T22:26:33.601515+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-24T13:09:04.308002+05:30","closed_at":"2026-01-24T13:09:04.308002+05:30","close_reason":"Closed"}
{"id":"wt-hz3","title":"wt auto: Mark beads in_progress when processing","description":"Beads being processed by wt auto still show as 'ready' in `wt ready` list.\n\n## Observed\nWhile wt auto was processing wt-tcf, wt-1a3, wt-hvx:\n- `wt ready wt` still showed all 3 as ready\n- No indication they were being worked on\n\n## Expected\n- Beads should be marked in_progress when wt auto starts processing\n- `wt ready` should not show beads currently in an auto run\n- Or show them with a different status indicator\n\n## Fix\n- Call `bd update \u003cbead\u003e --status in_progress` when auto starts each bead\n- Or maintain auto state that `wt ready` checks against","status":"closed","priority":2,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T12:30:47.463569+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T13:07:04.873697+05:30","closed_at":"2026-01-25T13:07:04.873697+05:30","close_reason":"Closed"}
{"id":"wt-imp","title":"Fix seance: counter for hub, block handoff","description":"Two issues with seance:\n1. Multiple hub seances collide on 'seance-hub' name - need counter\n2. Handoff from seance session corrupts real hub state - should be blocked","status":"closed","priority":1,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-20T20:53:27.606462+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-20T21:06:43.417883+05:30","closed_at":"2026-01-20T21:06:43.417883+05:30","close_reason":"Fixed: file-based handoff, timestamped hub seances, isolated seance handoffs"}
{"id":"wt-iul","title":"Fix worker startup race conditions","description":"Use NewSessionWithCommand pattern from gastown to run Claude directly as pane process instead of send-keys. Add mutex serialization to NudgeSession. Add WaitForCommand before WaitForClaude. This eliminates the timing issues where prompts arrive before Claude is ready.","status":"closed","priority":1,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-21T17:13:33.87749+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T17:25:39.825983+05:30","closed_at":"2026-01-21T17:25:39.825983+05:30","close_reason":"Implemented direct command execution for tmux sessions and added NudgeSession mutex"}
{"id":"wt-jek","title":"wt auto createSession fails to parse session name","description":"createSession looks for 'Created session' but wt new outputs 'Session X ready'. This causes auto to error on every bead even though sessions are created successfully.","status":"closed","priority":1,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-21T20:57:54.44889+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T21:58:41.307219+05:30","closed_at":"2026-01-21T21:58:41.307219+05:30","close_reason":"Closed"}
{"id":"wt-jh9","title":"Add /handoff skill that summarizes conversation before handoff","description":"Create a /handoff skill that:\n1. Instructs Claude to summarize the current conversation\n2. Passes the summary to wt handoff -m\n3. Triggers the respawn with context\n\nThis replaces the current workflow where wt handoff CLI has no access to conversation content. The skill approach lets Claude generate a meaningful summary before handing off.","status":"closed","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-24T18:11:32.34759+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T11:00:57.070306+05:30","closed_at":"2026-01-25T11:00:57.070306+05:30","close_reason":"Closed"}
{"id":"wt-jvs","title":"Add --no-switch flag to wt new (or flip default)","description":"When spawning a new session from the hub with 'wt new', currently it auto-switches to that session. For a hub-centric workflow, staying in the hub may be better default - spawn workers without leaving, explicitly attach when ready. Options: (1) Add --no-switch flag to stay in hub, (2) Flip default to stay in hub and add --switch flag, (3) Make it configurable per-project or globally.","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-21T11:46:11.57458+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T11:58:40.451107+05:30","closed_at":"2026-01-21T11:58:40.451107+05:30","close_reason":"Closed"}
{"id":"wt-k0d","title":"Add project-targeting commands for hub multi-project grooming","description":"Add wt create, wt ready, and other commands that can target specific projects from the hub without changing directories. Enables hub-based grooming across multiple registered projects while keeping each project's .beads/ as source of truth.","status":"closed","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T12:44:55.37821+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T12:48:26.034613+05:30","closed_at":"2026-01-19T12:48:26.034613+05:30","close_reason":"Implemented project-targeting commands: wt create, wt beads, enhanced wt ready"}
{"id":"wt-kg0","title":"wt new generates conflicting worktree paths","description":"Two issues:\n\n1. **Worktree path collision**: When spawning multiple sessions, wt generates the same worktree path (e.g., wt-po) for different beads, causing 'fatal: path already exists' errors. Each session needs a unique worktree path - should be based on bead ID or guaranteed unique identifier.\n\n2. **wt close should be context-aware**: Currently closes the bead when session closes. Should instead sense context:\n   - Uncommitted changes / no commits → keep bead open\n   - Commits made but not merged → keep bead open  \n   - Branch merged to main → close the bead\n   - User explicitly runs wt done → close the bead\n   - Session killed/force closed → keep bead open\n\nBead closes when work is complete, not when session ends.","status":"closed","priority":1,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-21T11:48:41.638795+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T12:21:04.918516+05:30","closed_at":"2026-01-21T12:21:04.918516+05:30","close_reason":"Closed"}
{"id":"wt-kw5","title":"Integration QA strategy: dogfooding vs toy projects","description":"Integration QA via wt-playground: two synthetic projects with scripted test scenarios.\n\n## Setup\nTwo projects registered in wt:\n- **playground-api** — Go HTTP server (simple CRUD)\n- **playground-web** — Static site or simple JS frontend\n\nBoth repos created locally with beads initialized.\n\n## Synthetic Beads\n\n### playground-api beads (~8 total)\n- 3 quick beads (~2 min): add endpoint, fix bug, update config\n- 2 slow beads (~10 min): refactor module, add comprehensive tests\n- 2 failure-prone beads: intentionally vague spec (\"improve performance\"), conflicting requirements\n- 1 epic grouping the above\n\n### playground-web beads (~4 total)\n- 2 quick beads: add page, fix styling\n- 1 slow bead: add build pipeline\n- 1 epic grouping the above\n\n## Test Script (scripts/integration-test.sh)\nScaffolds repos, registers projects, creates beads, then runs scenarios:\n\n### Scenarios\n1. **Happy path**: `wt auto --epic api-epic --dry-run` then real run on quick beads\n2. **Failure handling**: Run epic with failure-prone bead, verify pause-on-failure behavior\n3. **Resume after failure**: `wt auto --resume`, verify it skips completed beads\n4. **Parallel projects**: Run both epics simultaneously (tests per-project locks from wt-5xf)\n5. **Stop mid-run**: Start epic, send `wt auto --stop`, verify graceful pause\n6. **Abort and cleanup**: `wt auto --abort`, verify worktree removal\n7. **Status check**: `wt auto --check` during run, verify output\n\n### Output\n- PASS/FAIL per scenario\n- Logs saved to playground/test-results/\n- Manual verification steps printed for scenarios that need human review\n\n## Execution\n```bash\n./scripts/integration-test.sh setup    # create repos, beads\n./scripts/integration-test.sh run      # run all scenarios\n./scripts/integration-test.sh cleanup  # tear down\n```","status":"open","priority":1,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-26T09:55:42.451922+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-30T16:01:14.240509+05:30","labels":["auto"]}
{"id":"wt-la5","title":"Phase 7: Polish","description":"Final polish:\n- Tmux keybindings (C-b n/p/h)\n- Shell completions (bash/zsh/fish)\n- Error handling and edge cases\n- Documentation and examples\n- go install support\n- Versioning (wt version command, -ldflags injection, CHANGELOG.md)","status":"in_progress","priority":2,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T09:32:14.474762+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T13:42:02.408174+05:30","dependencies":[{"issue_id":"wt-la5","depends_on_id":"wt-wjo","type":"blocks","created_at":"2026-01-19T09:32:21.401169+05:30","created_by":"Lakshmi Narasimhan"},{"issue_id":"wt-la5","depends_on_id":"wt-e6j","type":"blocks","created_at":"2026-01-19T13:03:06.407874+05:30","created_by":"Lakshmi Narasimhan"},{"issue_id":"wt-la5","depends_on_id":"wt-edt","type":"blocks","created_at":"2026-01-19T13:51:15.462995+05:30","created_by":"Lakshmi Narasimhan"},{"issue_id":"wt-la5","depends_on_id":"wt-nnn","type":"blocks","created_at":"2026-01-19T13:51:15.596469+05:30","created_by":"Lakshmi Narasimhan"},{"issue_id":"wt-la5","depends_on_id":"wt-uhf","type":"blocks","created_at":"2026-01-19T13:51:15.732662+05:30","created_by":"Lakshmi Narasimhan"},{"issue_id":"wt-la5","depends_on_id":"wt-6dc","type":"blocks","created_at":"2026-01-19T13:51:16.0671+05:30","created_by":"Lakshmi Narasimhan"},{"issue_id":"wt-la5","depends_on_id":"wt-6uk","type":"blocks","created_at":"2026-01-19T13:51:27.470836+05:30","created_by":"Lakshmi Narasimhan"}]}
{"id":"wt-lwa","title":"Hub session prompt injection: Use tmux send-keys instead of -p flag","description":"## Problem\n\n`-p` flag processes prompt and exits, doesn't maintain interactive session.\n\nCurrent (broken):\n```bash\nclaude -p \"A handoff file exists...\"\n```\n\n## Solution\n\nUse same pattern as worker sessions - tmux send-keys injection:\n```bash\n# Start hub interactive\nclaude --dangerously-skip-permissions --append-system-prompt \"...\"\n\n# Inject prompt via tmux\ntmux send-keys -t hub \"Read ~/.config/wt/handoff.md and acknowledge context\" Enter\n```\n\n## Acceptance Criteria\n- Hub session starts interactive\n- Handoff prompt injected after session ready\n- Session remains interactive for follow-up","status":"tombstone","priority":1,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T16:15:13.097705+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T16:16:17.388362+05:30","deleted_at":"2026-01-25T16:16:17.388362+05:30","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"wt-m82","title":"Per-project config: Test environment setup","description":"Add test environment configuration to .wt/config.yaml.\n\n## Config Structure\n```yaml\n# .wt/config.yaml\n\ntest_env:\n  # Setup command run when worker spawns\n  setup: |\n    docker compose up -d\n    ./scripts/wait-for-db.sh\n  \n  # Teardown command run when worker completes/dies\n  teardown: |\n    docker compose down -v\n  \n  # Health check before sending prompt to worker\n  health_check:\n    command: curl -f http://localhost:${PORT}/health\n    timeout: 60s\n    retries: 5\n  \n  # Port isolation for parallel workers\n  port_env: PORT_OFFSET  # env var name\n  base_port: 3000        # worker 1 gets 3001, worker 2 gets 3002, etc.\n  \n  # Environment variables for test env\n  env:\n    DATABASE_URL: postgres://localhost:5432/test_${WT_SESSION}\n    REDIS_URL: redis://localhost:6379/${PORT_OFFSET}\n```\n\n## Behavior\n1. On `wt new`: Run setup, wait for health_check\n2. On `wt done/kill/abandon`: Run teardown\n3. PORT_OFFSET auto-allocated per worker (1, 2, 3...)\n4. Env vars interpolated with ${WT_SESSION}, ${PORT_OFFSET}, etc.\n\n## Already Partially Implemented\nCurrent project config has test_env.setup/teardown. This extends it with:\n- Health checks\n- Port isolation config\n- Environment variable templating","status":"open","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T15:24:25.847947+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T15:24:25.847947+05:30","labels":["auto"]}
{"id":"wt-nnn","title":"Add wt version command with ldflags injection","status":"closed","priority":2,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T13:50:53.326818+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T14:03:35.024306+05:30","closed_at":"2026-01-19T14:03:35.024306+05:30","close_reason":"Implemented wt version command with ldflags injection"}
{"id":"wt-np9","title":"Add wt auto command for autonomous batch processing","description":"Implement wt auto command that processes ready beads sequentially overnight.\n\n## Flow\n1. Acquire lock (~/.config/wt/auto.lock) - exit if already running\n2. Get ready beads from bd ready (optional --project filter)\n3. For each bead:\n   - wt new \u003cbead\u003e --no-switch\n   - Run configured claude command with prompt template\n   - Wait for session to die or timeout\n   - Merge based on --merge-mode flag\n   - Log result to ~/.config/wt/logs/auto-\u003ctimestamp\u003e.log\n4. Check for stop signal between beads\n5. Pick next ready bead, repeat until done\n6. Release lock\n\n## CLI Flags\n- --project=\u003cname\u003e: filter to specific project\n- --merge-mode=\u003cdirect|pr-review|pr-auto|none\u003e: override project default\n- --dry-run: show what would run without executing\n- --check: validate beads are well-groomed before running\n- --stop: signal running wt auto to stop after current bead\n- --timeout=\u003cminutes\u003e: override per-bead timeout (default 30)\n\n## Project Config (auto section)\n```json\n{\n  \"auto\": {\n    \"command\": \"claude --dangerously-skip-permissions\",\n    \"timeout_minutes\": 30,\n    \"prompt_template\": \"Work on bead {BEAD_ID}: {TITLE}...\"\n  }\n}\n```\n\n## Template Variables\n{BEAD_ID}, {TITLE}, {DESCRIPTION}, {SESSION}, {PROJECT}, {WORKTREE}\n\n## Stopping\n- Ctrl+C: current session keeps running (orphaned)\n- --stop flag or touch ~/.config/wt/stop-auto: graceful stop after current bead\n- Resume: just run wt auto again, bd ready shows remaining work\n\n## Lock File\n- ~/.config/wt/auto.lock prevents multiple wt auto instances\n- Contains: PID, start time, project filter\n- --force to override (risky)\n\n## Logging\n- ~/.config/wt/logs/auto-\u003ctimestamp\u003e.log\n- Per-bead: start time, bead ID, outcome (success/fail/timeout), duration\n\nDepends on wt-f3p (wt ready) and wt-661 (merge workflow).","status":"closed","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T10:55:37.961718+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T13:08:21.367207+05:30","closed_at":"2026-01-19T13:08:21.367207+05:30","close_reason":"Implemented wt auto command with lock file, logging, dry-run, check, and stop signal handling","dependencies":[{"issue_id":"wt-np9","depends_on_id":"wt-f3p","type":"blocks","created_at":"2026-01-19T10:55:44.367793+05:30","created_by":"Lakshmi Narasimhan"},{"issue_id":"wt-np9","depends_on_id":"wt-661","type":"blocks","created_at":"2026-01-19T10:56:48.904879+05:30","created_by":"Lakshmi Narasimhan"}]}
{"id":"wt-oe0","title":"wt auto: exclude parent-child deps within epic from audit blocker check","description":"## Problem\n`wt auto --epic \u003cid\u003e` fails audit because child beads have parent-child relationship to the epic, which is treated as an external blocker.\n\n```\n=== Epic Audit Failed ===\n  ✗ Bead gw-backend-uws2 has external blocker: gw-backend-z04u\n```\n\n## Expected Behavior\nParent-child relationships within the same epic should NOT be treated as blocking dependencies during `wt auto --epic`.\n\n## Current Workaround\n`wt auto --epic \u003cid\u003e --skip-audit`\n\n## Fix\nIn audit logic, when checking for external blockers: if the blocker is the epic itself (the --epic argument), skip it. Only flag true external blockers.\n\n## Acceptance Criteria\n- `wt auto --epic X` passes audit when children only depend on X via parent-child\n- True external blockers still fail audit\n- Inter-child dependencies within epic still respected","status":"closed","priority":1,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-26T10:27:33.445018+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-26T10:46:40.492465+05:30","closed_at":"2026-01-26T10:46:40.492465+05:30","close_reason":"Closed"}
{"id":"wt-pgj","title":"Fix all list commands to use TUI table component","status":"closed","priority":2,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-20T18:02:24.342532+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-20T18:29:43.263757+05:30","closed_at":"2026-01-20T18:29:43.263757+05:30","close_reason":"Updated events and seance commands to use TUI table component"}
{"id":"wt-qis","title":"Fix namepool not skipping already-used session names","description":"When spawning multiple workers, the namepool allocates the same name (e.g., 'po') even when a session with that name already exists. Allocate() receives state.UsedNames() but isn't properly filtering them out, causing 'tmux session already exists' errors.","status":"closed","priority":1,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-21T16:33:16.718125+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T17:10:32.551173+05:30","closed_at":"2026-01-21T17:10:32.551173+05:30","close_reason":"Closed"}
{"id":"wt-qxd","title":"Search inside past session transcripts","description":"Allow searching through Claude conversation history:\n\nwt seance --search 'auth bug fix'\n\nImplementation options:\n1. Locate Claude transcript files (~/.claude/projects/...)\n2. Parse JSONL or markdown transcripts\n3. Grep through content\n4. Return matching sessions with context\n\nCould also support:\n- Semantic search (embeddings)\n- Full-text indexing\n- Preview of matching content\n\nBigger scope - investigate Claude Code transcript storage first.","status":"open","priority":3,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T12:12:44.62056+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T12:12:44.62056+05:30"}
{"id":"wt-rcj","title":"Add /handoff skill that summarizes conversation before handoff","description":"Create a /handoff skill that:\n1. Instructs Claude to summarize the current conversation\n2. Passes the summary to wt handoff -m\n3. Triggers the respawn with context\n\nThis replaces the workflow where wt handoff CLI has no access to conversation content. The skill approach lets Claude generate a meaningful summary before handing off.\n\nImplementation:\n- Create SKILL.md in appropriate location\n- Skill prompts Claude to summarize key points, decisions, and next steps\n- Skill calls wt handoff -m with the summary\n- New session reads handoff.md and has full context","status":"closed","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-24T18:12:16.162374+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-24T19:47:14.993144+05:30","closed_at":"2026-01-24T19:47:14.993144+05:30","close_reason":"Integrated into /wt skill instead of separate skill - added conversation summary instructions to handoff section"}
{"id":"wt-rw7","title":"wt auto: Fresh session per bead with batch-aware prompt","description":"Improve wt auto to prevent context rot and use batch-aware prompts.\n\n## Problem\nCurrently wt auto may reuse the same Claude session for all beads, causing:\n- Context rot (bloated with exploration/noise from previous beads)\n- Incorrect prompts (worker might try to create PR after each bead)\n- No awareness of batch position (1/3, 2/3, etc.)\n\n## Solution: Fresh Session Per Bead\n\n```\nBead 1: Fresh Claude → implements → commits → session ends\nBead 2: Fresh Claude → reads git log → builds on bead 1 → commits → session ends  \nBead 3: Fresh Claude → reads git log → builds on bead 1+2 → commits → creates PR\n```\n\nThe **worktree** is shared state, not the conversation. Each bead starts with clean context but full code context via git.\n\n## Batch-Aware Prompt\n\nInclude in prompt for each bead:\n\n```\nYou are working on bead 2/3 in epic wt-g0w: \"\u003cbead title\u003e\"\n\n## Epic Context\nEpic: Documentation P2 batch\nTotal beads: 3\nCurrent: 2/3\n\n## Previous Work (already committed in this worktree)\n- wt-tcf: Added --help flag to all subcommands (commit abc123)\n  Files: cmd/wt/main.go, cmd/wt/help.go\n\n## Your Task\n\u003cbead description\u003e\n\n## Workflow\n1. Review previous commits if relevant: git log --oneline -5\n2. Implement this bead (build on existing work)\n3. Commit with descriptive message\n4. Signal completion: wt signal bead-done \"\u003csummary\u003e\"\n\nDo NOT:\n- Create a PR (wt auto handles this after all beads)\n- Run wt done\n- Modify files unrelated to this bead\n```\n\n## Implementation\n\n1. After each bead completes:\n   - Capture commit hash and summary\n   - Kill Claude session\n   - Update epic progress state\n\n2. Before starting next bead:\n   - Start fresh Claude session in same worktree\n   - Build prompt with:\n     - Bead position (N/M)\n     - Previous beads' commit summaries\n     - Current bead description\n   - Send batch-aware prompt\n\n3. After final bead:\n   - Create PR with all commits\n   - Close epic\n\n## New Signal\n\nAdd `wt signal bead-done \"\u003csummary\u003e\"` for batch completion:\n- Indicates bead work is complete\n- Includes summary for next bead's context\n- Different from `ready` (which implies PR created)\n\n## Benefits\n- Clean context per bead (no rot)\n- Each bead aware of batch position\n- Git history provides code context\n- Failure recovery is cleaner (restart failed bead only)\n- Summaries flow forward without conversation bloat","status":"closed","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T12:26:16.536538+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T12:56:38.006026+05:30","closed_at":"2026-01-25T12:56:38.006026+05:30","close_reason":"Closed"}
{"id":"wt-rzz","title":"Session completion not triggering audio alert","description":"Session completion notifications don't play audio. Root cause: internal/monitor/notify.go:21 uses AppleScript display notification without sound name parameter. Fix: Add 'sound name \"default\"' to the AppleScript. For Linux, consider --urgency flag for notify-send.","status":"closed","priority":2,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-20T19:37:08.518842+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-20T19:38:26.950051+05:30","closed_at":"2026-01-20T19:38:26.950051+05:30","close_reason":"Added sound name parameter to macOS notification"}
{"id":"wt-sh8","title":"wt doctor: Add CLAUDE.md health checks","description":"Extend wt doctor to check CLAUDE.md health for registered projects:\n\n1. Verify referenced file paths exist in codebase\n2. Detect anti-patterns:\n   - Code snippets (may go stale)\n   - Line number references\n   - Excessive length (warn if \u003e300 lines)\n3. Check for essential sections:\n   - Project structure\n   - Build/test instructions\n   - Patterns/conventions\n4. Run checks for all registered projects\n5. Show per-project health summary\n\nExample output:\n```\nProject Health:\n[!] wt: CLAUDE.md has 2 warnings\n    - References internal/foo/bar.go (not found)\n    - 450 lines (recommended: \u003c300)\n[✓] gw-backend: CLAUDE.md healthy\n[✓] reddit-saas: No CLAUDE.md (consider adding one)\n```","status":"closed","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T11:46:27.070153+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T13:08:18.354061+05:30","closed_at":"2026-01-25T13:08:18.354061+05:30","close_reason":"Closed"}
{"id":"wt-sps","title":"wt auto: getEpicBeads doesn't resolve parent-child dependents","description":"Follow-up to wt-805. After removing the prefix fallback, getEpicBeads() still fails to find epic children because it queries bd dep list --direction blocked-by which returns [] for parent-child relationships. The children ARE available via bd show \u003cepic\u003e --json under the 'dependents' array with dependency_type: parent-child. Fix: use bd show --json to extract dependents when bd dep list returns empty, then filter readyBeads against those IDs. See internal/auto/auto.go getEpicBeads() function.","status":"closed","priority":1,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-29T18:31:02.187029+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-29T18:49:23.3401+05:30","closed_at":"2026-01-29T18:49:23.3401+05:30","close_reason":"Fixed - getEpicBeads now resolves parent-child dependents via bd show --json","dependencies":[{"issue_id":"wt-sps","depends_on_id":"wt-805","type":"blocks","created_at":"2026-01-29T18:31:02.187897+05:30","created_by":"Lakshmi Narasimhan"}]}
{"id":"wt-ss3","title":"Add handoff command for hub session persistence","description":"## Overview\nAllow hub sessions to survive compaction and session restarts by implementing a handoff command that cycles to a fresh Claude instance while preserving work context.\n\n## Inspiration\nBased on gastown's handoff system (~/claude-tools/gastown/internal/cmd/handoff.go)\n\n## Commands to Implement\n\n### wt handoff\n- `wt handoff` - Hand off with auto-collected context (ready beads, in-progress work)\n- `wt handoff -m \"notes\"` - Include custom message/context\n- `wt handoff -c` - Auto-collect state (ready beads, active sessions, etc.)\n\n### wt prime\n- Startup context injection command\n- Detects post-handoff state and warns against re-running handoff\n- Injects handoff content from previous session\n- Integrates with Claude Code SessionStart hook\n\n## Persistence Mechanisms\n\n1. **Handoff Bead** (pinned)\n   - Stores hub context in .beads/issues.jsonl\n   - Title: \"Hub Handoff\" with status=pinned\n   - Never auto-closed or compacted\n\n2. **Handoff Marker** (.wt/handoff_marker)\n   - Plain text file with previous session name\n   - Written before respawn, removed by wt prime\n   - Prevents handoff loop bug\n\n## Implementation Flow\n\n```\nwt handoff -c\n  ├─ Collect state (bd ready, wt list, in-progress beads)\n  ├─ Update/create pinned handoff bead\n  ├─ Write marker file\n  ├─ Clear tmux history\n  └─ tmux respawn-pane with fresh Claude\n\nwt prime (on new session start)\n  ├─ Check for handoff marker\n  ├─ If found: output warning + inject handoff content\n  ├─ Remove marker file\n  └─ Run bd prime for beads context\n```\n\n## Files to Create/Modify\n\n- cmd/wt/main.go - Add handoff and prime commands\n- internal/handoff/handoff.go - Core handoff logic\n- internal/handoff/prime.go - Startup context injection\n- .claude/settings.json example - SessionStart hook config","status":"closed","priority":2,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T15:31:30.197962+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T15:43:06.573482+05:30","closed_at":"2026-01-19T15:43:06.573482+05:30","close_reason":"Implemented handoff and prime commands"}
{"id":"wt-tcf","title":"Add --help flag to all subcommands","description":"Some subcommands have --help, some don't. All subcommands should consistently support --help flag to show usage information.","status":"closed","priority":2,"issue_type":"chore","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T07:25:03.406168+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T12:28:56.676425+05:30","closed_at":"2026-01-25T12:28:56.676425+05:30","close_reason":"Closed"}
{"id":"wt-tkm","title":"Fix notification sound not working","description":"Notifications from wt watch aren't producing sound on macOS or Linux.\n\n## Issues Found\n\n### macOS\n1. **Quote escaping bug** - AppleScript breaks if message contains quotes\n2. **Errors silently ignored** - callers don't check Notify() errors\n\n### Linux  \n1. **No sound** - `notify-send` doesn't play sound by default\n2. **Same escaping issues** - special chars could cause problems\n\n## Fix\n\n### 1. Escape strings properly (both platforms)\n\n### 2. Add sound to Linux\nOptions:\n- `notify-send --urgency=critical` (some DEs play sound)\n- `paplay` or `aplay` for explicit sound\n- Or just rely on terminal bell\n\n### 3. Terminal bell as universal fallback\n```go\n// Always ring terminal bell - works everywhere\nfmt.Print(\"\\a\")\n```\n\n### 4. Log errors\nCheck and log Notify() errors in hub_commands.go for debugging.\n\n## Implementation\n\n```go\nfunc notifyMacOS(title, message string) error {\n    // Escape double quotes for AppleScript\n    title = strings.ReplaceAll(title, \"\\\"\", \"\\\\\\\"\")\n    message = strings.ReplaceAll(message, \"\\\"\", \"\\\\\\\"\")\n    \n    script := `display notification \"...`\n    err := cmd.Run()\n    \n    ringBell()\n    return err\n}\n\nfunc notifyLinux(title, message string) error {\n    cmd := exec.Command(\"notify-send\", \"--urgency=critical\", title, message)\n    err := cmd.Run()\n    \n    ringBell()\n    return err\n}\n\nfunc ringBell() {\n    fmt.Print(\"\\a\")\n}\n```","status":"closed","priority":1,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-25T12:55:24.847638+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-25T12:59:25.455712+05:30","closed_at":"2026-01-25T12:59:25.455712+05:30","close_reason":"Closed"}
{"id":"wt-udc","title":"wt auto: orchestrator exits after starting first bead instead of watching for signals","description":"wt auto exits (code 0) immediately after sending the first bead to the worker session. The orchestrator should stay alive watching for bead-done signals to advance to the next bead. Instead, workers complete bead 1, signal bead-done, and get 'Not in auto mode' because nothing is listening. The auto runner prints 'This will automatically transition to the next bead' but the process that should handle transitions has already exited. Workers are left idle at a prompt after completing bead 1/5.","status":"closed","priority":0,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-30T08:07:22.936022+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-30T08:10:05.185935+05:30","closed_at":"2026-01-30T08:10:05.185935+05:30","close_reason":"processEpic now stays alive and processes all beads in a loop using runClaudeInSession, instead of firing first bead and exiting"}
{"id":"wt-uhf","title":"Add go install support and documentation","status":"closed","priority":2,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T13:50:54.887824+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T14:39:48.994038+05:30","closed_at":"2026-01-19T14:39:48.994038+05:30","close_reason":"Added npm package, go install support, themed namepool (6 themes)"}
{"id":"wt-vdh","title":"Workers should self-merge for direct mode projects","description":"Change worker workflow so workers run 'wt done' for direct merge mode projects instead of signaling ready and waiting for hub to merge.\n\nCurrent behavior:\n- Worker commits, signals ready, waits\n- Hub manually merges via 'wt close'\n- Creates unnecessary friction for direct mode\n\nNew behavior for direct mode:\n- Worker commits\n- Worker runs 'wt done --merge-mode direct'\n- Worker merges to main, pushes, cleans up autonomously\n\nKeep current behavior for pr-review mode (hub controls merge timing).\n\nChanges needed:\n1. Update buildInitialPrompt() in session_commands.go to tell workers to run 'wt done' for direct mode\n2. Remove 'Do NOT run wt done' instruction for direct mode projects","status":"closed","priority":1,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-21T12:22:29.314084+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T12:30:10.648676+05:30","closed_at":"2026-01-21T12:30:10.648676+05:30","close_reason":"Closed"}
{"id":"wt-vry","title":"Evaluate MCP Agent Mail integration for wt","description":"Research and design inter-agent messaging for wt sessions. Goal: enable hub-worker dialogue, worker-worker coordination, and better audit trails.","notes":"## Architecture Decision\nDirection: Native Go messaging, inspired by MCP Agent Mail protocol.\n\nRationale: MCP Agent Mail spike (wt-wy7, PR #2) validated the protocol design\n(TASK/DONE/STUCK subjects, ack model, file reservations) but the external Python\ndependency adds unacceptable setup friction and failure modes.\n\n## Children\n- ✓ wt-wy7: MCP Agent Mail spike — CLOSED with findings\n- wt-h1z: Native Go messaging prototype — next up\n- wt-4yq: Use case design — depends on h1z findings\n\n## Completion Criteria (updated)\n- Native Go messaging prototype built and tested (wt-h1z)\n- Use cases mapped to messaging design (wt-4yq)\n- Architecture decision recorded (this note)","status":"open","priority":1,"issue_type":"epic","owner":"badri.dilbert@gmail.com","created_at":"2026-01-27T08:10:16.169332+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-30T14:44:15.625713+05:30"}
{"id":"wt-vzf","title":"Fix session ID capture for seance","description":"Current approach fails: os.Getenv only works inside Claude, file scanning is brittle. Implement gastown's pattern: add wt prime --hook that reads session_id from Claude's SessionStart hook JSON on stdin, persist to .runtime/session_id in worktree. Configure as SessionStart hook in worker sessions.","status":"closed","priority":1,"issue_type":"bug","owner":"badri.dilbert@gmail.com","created_at":"2026-01-21T17:13:33.974684+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-21T17:25:13.628624+05:30","closed_at":"2026-01-21T17:25:13.628624+05:30","close_reason":"Closed"}
{"id":"wt-wh2","title":"Multi-hub architecture: project-scoped orchestration","description":"## Idea\nMultiple specialized hubs (e.g., frontend-hub, backend-hub) each focused on a subset of projects, plus a coordination hub that sees across them. Avoids context pollution when managing many projects.\n\n## Analysis\n\n**Benefits:**\n- Reduces context pollution — hub managing 5+ projects accumulates irrelevant context\n- Specialized hubs could have project-specific MCP servers, prompts, domain knowledge\n- Coordination hub focuses purely on cross-project dependencies and prioritization\n\n**Complexity concerns:**\n- Hub-to-hub communication (relates to MCP Agent Mail evaluation wt-vry)\n- Shared state — which hub owns a bead when projects overlap?\n- Session management — wt watch/auto would need hub-scoping\n- User cognitive load — which hub am I in?\n\n## Decision (2026-01-27)\nDeferred. The simpler path gets 80% of the benefit:\n\n1. **Project-scoped hub views** — extend filtering to all hub commands (wt watch --project, wt auto --project). Hub stays singular, views are scoped. Partly tracked by wt-8wf.\n2. **Context pollution fix** — better compaction and on-demand querying within a single hub, not multiplying hubs.\n3. **Multi-hub trigger** — revisit when genuinely independent teams/projects exist with no shared dependencies. At that point it's just running `wt hub` in separate terminals.\n4. **Dependency** — MCP Agent Mail evaluation (wt-vry) would inform whether cross-hub messaging is feasible.","status":"open","priority":1,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-27T11:18:48.793896+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-29T18:44:19.499402+05:30","labels":["auto"]}
{"id":"wt-wjo","title":"Phase 6: Seance","description":"Implement seance (talk to past sessions):\n- Event logging (session_start, session_end with IDs)\n- wt seance: List recent sessions\n- wt seance \u003cname\u003e: Fork and talk to past session\n- wt seance \u003cname\u003e -p 'question': One-shot query\n- Session ID capture from Claude output\n- events.jsonl persistence","status":"closed","priority":2,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-19T09:32:12.789277+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-19T12:09:18.675959+05:30","closed_at":"2026-01-19T12:09:18.675959+05:30","close_reason":"Closed","dependencies":[{"issue_id":"wt-wjo","depends_on_id":"wt-924","type":"blocks","created_at":"2026-01-19T09:32:21.316727+05:30","created_by":"Lakshmi Narasimhan"}]}
{"id":"wt-wy7","title":"Spike: Test MCP Agent Mail as MCP server with Claude","description":"Install and configure mcp_agent_mail, test basic message flow between two Claude sessions. Evaluate: setup complexity, reliability, latency, storage requirements.","status":"closed","priority":1,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-27T08:10:24.841869+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-30T14:43:36.926781+05:30","closed_at":"2026-01-30T14:43:36.926781+05:30","close_reason":"Spike complete via PR #2. Findings: MCP Agent Mail protocol (TASK/DONE/STUCK, ack model, file reservations) is solid reference design. However, external Python dependency adds setup friction and failure modes. Recommendation: build native Go messaging inspired by Agent Mail's protocol. See PR #2 for client code and test patterns."}
{"id":"wt-xu8","title":"Show bead/task 1-liner in wt watch and session picker","description":"wt watch and C-b s session picker should show a 1-liner description of what each worker is doing (bead title or task description) so user understands at a glance.","status":"closed","priority":3,"issue_type":"feature","owner":"badri.dilbert@gmail.com","created_at":"2026-01-20T19:36:24.904789+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-20T19:44:37.28403+05:30","closed_at":"2026-01-20T19:44:37.28403+05:30","close_reason":"Added bead title display to wt list, wt watch, and session picker (wt pick). Users can now see what each session is working on at a glance."}
{"id":"wt-yuh","title":"Test Hub Handoff","description":"test","status":"closed","priority":4,"issue_type":"task","owner":"badri.dilbert@gmail.com","created_at":"2026-01-20T20:27:08.132473+05:30","created_by":"Lakshmi Narasimhan","updated_at":"2026-01-20T20:27:15.759614+05:30","closed_at":"2026-01-20T20:27:15.759614+05:30","close_reason":"Test bead, deleting"}
